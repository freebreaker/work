{"version":3,"sources":["webpack:///./src/pages/auth/adminusers/index.less?2677","pages/auth/adminusers/index.less","pages/auth/adminusers/roleChildrenTable.tsx","components/cityCodeBox/index.tsx","pages/auth/adminusers/index.tsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","RoleChildrenTable","_React$Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","_this","columns","title","dataIndex","render","details","record","allOptions","map","item","index","label","authName","id","defalutOptions","react","es_checkbox","Group","defaultValue","onChange","props","editData","table","dataSource","tableData","locale","filterConfirm","filterReset","emptyText","React","CityCodeBox","Boxes","color","tag","type","Dragger","Upload","Option","Select","AdminUsersPageWrap","state","files","updateId","selectedRowKeys","selectedPetKeys","selectedPetTypeKeys","loading","filteredInfo","sortedInfo","visible","editVisible","addVisible","imageSrc","imageUrl","defaultRoleName","defalutSizeValue","editSizeVisible","resTableData","resRoleTableData","showImage","roleChildrenTableData","roleGroupId","submitMenu","menus","menuName","menuUrl","menuAddMenuChildren","menusList","editGroupModal","editGroupData","groupData","radioValue","adminId","name","pwd","realName","groupId","phone","email","cityCode","onSelectChange","setState","handleChange","pagination","filters","sorter","handleDelete","addRole","showDrawer","addAdminUser","_this$state","axios","method","url","data","then","res","message","success","setTimeout","window","location","reload","error","addMenu","That","assertThisInitialized","concat","editRole","menuChildren","allMenuChildren","menuChildrenIds","menuIds","deleteRole","ids","editSubmitRole","targetMenu","find","submitRole","editArr","onMenuSelectChange","option","children","onCheckboxSelectChange","sumitAddMenu","_this$state2","editGroup","handleOk","_this$state3","handleCancel","radioChange","e","target","addRadioChange","handleSubmit","preventDefault","AvatarUrl","form","validateFieldsAndScroll","err","values","icon","handleUpload","_ref","fileList","file","imgName","localStorage","getItem","timeStamp","Date","getTime","toString","length","alert","fileName","upToken","sendToQiniu","ImageString","concatImageString","nickname","image","usertype","roleName","tel","ip","registertime","ct","moment","parseInt","format","lastlogintime","lastLoginTime","_this2","_this$state4","imgSrc","fieldsError","text","split","href","onClick","cityCodeBox_CityCodeBox","bind","style","marginRight","rowSelection","hasSelected","selectOptions","path","checkboxOptions","radios","es_radio","Button","addRadios","marginBottom","textAlign","es_button","disabled","marginLeft","pageSize","drawer","width","placement","closable","onClose","es_form","onSubmit","Item","hasFeedback","getFieldDecorator","initialValue","setFieldsValue","rules","required","input","placeholder","pattern","buttonStyle","className","beforeUpload","toConsumableArray","position","left","bottom","borderTop","padding","background","block","htmlType","getFieldsError","keys","some","field","roleChildrenTable_RoleChildrenTable","es_select","marginTop","display","modal","onOk","onCancel","okText","cancelText","footer","destroyOnClose","src","alt","AdminUsersPage","Form","create"],"mappings":"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","file":"static/js/15.b9738e7b.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n\n","import * as React from 'react';\r\nimport { Table, Checkbox } from 'antd';\r\n\r\ninterface IRoleChildrenTableProps {\r\n    tableName?: string,\r\n    tableData: any[],\r\n    roleGroupId:number,\r\n    editData:(id:number,data:any) => void\r\n}\r\n\r\ninterface Detail {\r\n    options:any[],\r\n    allOptions:any[]\r\n}\r\n\r\nexport class RoleChildrenTable extends React.Component<IRoleChildrenTableProps> {\r\n\r\n    public render() {\r\n        const columns = [{\r\n            title: '模块名',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        }, {\r\n            title: '权限明细',\r\n            dataIndex: 'details',\r\n            key: 'details',\r\n            render: (details: Detail,record:any) => {\r\n                const options = details.allOptions.map((item, index) => {\r\n                    return {\r\n                        label: item.authName,\r\n                        value: item.id,\r\n                    }\r\n                })\r\n\r\n                const defalutOptions = details.options.map((item, index) => {\r\n                    return item.id\r\n                })\r\n                return (\r\n                    <span>\r\n                        <Checkbox.Group options={options} defaultValue={defalutOptions} onChange={(value)=>this.props.editData(record.key,value)}/>\r\n                    </span>\r\n                )\r\n            },\r\n        }];\r\n        return (\r\n            <div>\r\n                <Table columns={columns} dataSource={this.props.tableData}\r\n                    locale={{ filterConfirm: \"确定\", filterReset: \"重置\", emptyText: \"暂无数据\" }}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Tag } from \"antd\";\r\n\r\ninterface ICityCodeBoxProps {\r\n    type: number\r\n}\r\n\r\nexport class CityCodeBox extends React.Component<ICityCodeBoxProps> {\r\n\r\n    public render() {\r\n        const Boxes = [{\r\n            color: \"#607d8b\",\r\n            content: \"扬州\"\r\n        },{\r\n            color: \"#03a9f4\",\r\n            content: \"蚌埠\"\r\n        },]\r\n        return (\r\n            <div>\r\n                <Tag color={Boxes[this.props.type].color}>{Boxes[this.props.type].content}</Tag>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport {\r\n  Table, Button, Drawer, Input, message,\r\n  Select, Checkbox, Modal, Radio, Form,\r\n  Upload, Icon\r\n} from 'antd';\r\n// import moment from 'moment';\r\nimport './index.less';\r\nimport axios from '../../../util/Axios';\r\nimport { RoleChildrenTable } from './roleChildrenTable';\r\nimport moment from 'moment'\r\nimport { sendToQiniu, concatImageString } from '../../../util/sendToQiniu';\r\nimport { CityCodeBox } from '../../../components/cityCodeBox';\r\nconst Dragger = Upload.Dragger;\r\nconst { Option } = Select;\r\n\r\nconst PopImage = (imgSrc: string) => (\r\n  <img src={imgSrc} alt=\"\" style={{ width: \"100%\" }} />\r\n)\r\n\r\ninterface IAdminUsersPageProps {\r\n  title?: string,\r\n  form: {\r\n    getFieldDecorator: any\r\n    getFieldsError: any\r\n    validateFieldsAndScroll: any\r\n  }\r\n}\r\n\r\nfunction hasErrors(fieldsError: any) {\r\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nclass AdminUsersPageWrap extends React.Component<IAdminUsersPageProps, any> {\r\n\r\n  public state = {\r\n    files: [],\r\n    updateId: 1, // edit id 要更新的id\r\n    selectedRowKeys: [], // Check here to configure the default column\r\n    selectedPetKeys: [],\r\n    selectedPetTypeKeys: [],\r\n    loading: false,\r\n    filteredInfo: null,\r\n    sortedInfo: \"\",\r\n    visible: false,\r\n    editVisible: false,\r\n    addVisible: false,\r\n    value: 2,  // 默认选择的一级分类\r\n    imageSrc: \"\", // 头像弹出层照片\r\n    imageUrl: \"\",\r\n    defaultRoleName: \"\", // 编辑商品名字\r\n    defalutSizeValue: 6, // 编辑商品体型\r\n    editSizeVisible: false,  // 编辑商品体型选项是否显示\r\n    tableData: [],\r\n    resTableData: [],\r\n    resRoleTableData: [],\r\n    showImage: false,\r\n    roleChildrenTableData: [],\r\n    roleGroupId: 1,\r\n    submitMenu: [],\r\n    menus: [],\r\n    menuName: \"\",\r\n    menuUrl: \"\",\r\n    menuAddMenuChildren: [],\r\n    menusList: [],\r\n    editGroupModal: false,\r\n    editGroupData: [],\r\n    groupData: [],\r\n    radioValue: \"\",\r\n    adminId: 1,\r\n    name: \"\",\r\n    pwd: \"\",\r\n    realName: \"\",\r\n    groupId: 1,\r\n    phone: \"\",\r\n    email: \"\",\r\n    cityCode: \"321000\"\r\n  };\r\n\r\n  public componentDidMount() {\r\n    const That = this\r\n    axios({\r\n      method: \"get\",\r\n      url: \"/adminusers/list\"\r\n    }).then((res: any) => {\r\n      if (res.length > 0) {\r\n        const tableData = res.map((item: any, index: number) => {\r\n          return {\r\n            key: item.id,  // key 应带对应data id \r\n            name: item.name,\r\n            nickname: item.nickname,\r\n            image: item.icon ? item.icon : \"\",\r\n            usertype: item.groupId ? item.groupId.roleName : \"----\",\r\n            phone: item.tel,\r\n            ip: item.ip ? item.ip : \"----\",\r\n            icon: item.icon,\r\n            realName: item.realName,\r\n            cityCode: item.cityCode,\r\n            registertime: item.ct ? moment(parseInt(item.ct, 10)).format('YYYY-MM-DD H:mm:ss') : \"----\",\r\n            lastlogintime: item.lastLoginTime ? moment(parseInt(item.lastLoginTime, 10)).format('YYYY-MM-DD H:mm:ss') : \"----\",\r\n          }\r\n        })\r\n        That.setState({\r\n          \"tableData\": tableData,\r\n          resTableData: res,\r\n          resRoleTableData: res\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  public onSelectChange = (selectedRowKeys: any) => {\r\n    this.setState({ selectedRowKeys });\r\n  }\r\n\r\n  public handleChange = (pagination: any, filters: any, sorter: any) => {\r\n    // console.log('Various parameters', pagination, filters, sorter);\r\n\r\n    this.setState({\r\n      filteredInfo: filters,\r\n      sortedInfo: sorter,\r\n    });\r\n  }\r\n\r\n  public handleDelete = (key: any) => {\r\n    // console.log(key)\r\n  }\r\n\r\n  public addRole = () => {\r\n    this.showDrawer()\r\n  }\r\n\r\n  public addAdminUser = () => {\r\n    const { name, pwd, groupId } = this.state\r\n    axios({\r\n      method: \"post\",\r\n      url: `/adminusers/add`,\r\n      data: {\r\n        name,\r\n        pwd,\r\n        groupId\r\n      }\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        message.success(\"添加成功\")\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 500);\r\n      } else {\r\n        message.error(\"删除失败\")\r\n      }\r\n    })\r\n  }\r\n\r\n  public addMenu = (record: any) => {\r\n    const That = this\r\n    axios({\r\n      method: \"get\",\r\n      url: `/menu/list?roleGroupId=${record.key}`\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        That.setState({\r\n          addVisible: true,\r\n          menus: res,\r\n          roleGroupId: record.key,\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  public editRole = (record: any) => {\r\n    const That = this\r\n    // console.log(record.size === \"----\", record)\r\n    axios({\r\n      method: \"get\",\r\n      url: `/role/menus?id=${record.key}`,\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        const roleChildrenTableData = res.map((item: any, index: number) => {\r\n          return {\r\n            key: item.id,\r\n            name: item.menuName,\r\n            details: {\r\n              options: item.menuChildren,\r\n              allOptions: item.allMenuChildren\r\n            },\r\n            menuChildrenIds: item.menuIds\r\n          }\r\n        })\r\n        That.setState({\r\n          editVisible: true,\r\n          defaultRoleName: record.name,\r\n          roleGroupId: record.key,\r\n          \"roleChildrenTableData\": roleChildrenTableData\r\n        })\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  public showDrawer = () => {\r\n    const That = this\r\n    axios({\r\n      method: \"get\",\r\n      url: `/role/list`\r\n    }).then((res) => {\r\n      if (res) {\r\n        That.setState({\r\n          groupData: res,\r\n          visible: true,\r\n        })\r\n      }\r\n    })\r\n  };\r\n\r\n  public deleteRole = () => {\r\n\r\n    const selectedRowKeys = this.state.selectedRowKeys\r\n\r\n    axios({\r\n      method: \"post\",\r\n      url: \"/user/delete\",\r\n      data: {\r\n        ids: selectedRowKeys\r\n      }\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        message.success(\"删除成功\")\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 500);\r\n      } else {\r\n        message.error(\"删除失败\")\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n\r\n  public editSubmitRole = (id: number, data: number[]) => {\r\n\r\n    const { submitMenu }: { submitMenu: any[] } = this.state\r\n\r\n    const targetMenu = submitMenu.map((item) => {\r\n      if (item.id === id) {\r\n        return {\r\n          id,\r\n          ids: data\r\n        }\r\n      } else {\r\n        return item\r\n      }\r\n    })\r\n\r\n    const target = submitMenu.find((item) => {\r\n      return item.id === id\r\n    })\r\n\r\n    if (target) {\r\n      this.setState({\r\n        submitMenu: targetMenu\r\n      })\r\n    } else {\r\n      targetMenu.push({\r\n        \"id\": id,\r\n        ids: data,\r\n      })\r\n      this.setState({\r\n        submitMenu: targetMenu\r\n      })\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  public submitRole = () => {\r\n    axios({\r\n      method: \"post\",\r\n      url: \"/role/edit\",\r\n      data: {\r\n        editArr: this.state.submitMenu\r\n      }\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        message.success(\"修改成功\")\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 500);\r\n      } else {\r\n        message.error(\"修改失败\")\r\n      }\r\n    })\r\n  }\r\n\r\n  public onMenuSelectChange = (value: string, option: any) => {\r\n    axios({\r\n      method: \"get\",\r\n      url: `/menu/path?name=${value}`,\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        // console.log(res)\r\n        this.setState({\r\n          menusList: res,\r\n          menuUrl: value,\r\n          menuName: option.props.children\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  public onCheckboxSelectChange = (value: any[]) => {\r\n    this.setState({\r\n      menuAddMenuChildren: value\r\n    })\r\n  }\r\n\r\n  public sumitAddMenu = () => {\r\n    const { menuName, roleGroupId, menuUrl, menuAddMenuChildren } = this.state\r\n    axios({\r\n      method: \"post\",\r\n      url: \"/menu/add\",\r\n      data: {\r\n        \"roleGroupId\": roleGroupId,\r\n        \"menuName\": menuName,\r\n        \"menuUrl\": menuUrl,\r\n        \"menuAddMenuChildren\": menuAddMenuChildren\r\n      }\r\n    }).then((res: any) => {\r\n      if (res) {\r\n        message.success(\"添加成功\")\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 1000);\r\n      } else {\r\n        message.error(\"添加失败\")\r\n      }\r\n    })\r\n  }\r\n\r\n  public editGroup = (record: any) => {\r\n    // console.log(record)\r\n    const That = this\r\n    axios({\r\n      method: \"get\",\r\n      url: `/role/list`\r\n    }).then((res) => {\r\n      if (res) {\r\n        That.setState({\r\n          editGroupModal: true,\r\n          editGroupData: res,\r\n          adminId: record.key\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  public handleOk = () => {\r\n    const { radioValue, adminId } = this.state\r\n    axios({\r\n      method: \"post\",\r\n      url: `/adminusers/group`,\r\n      data: {\r\n        groupId: radioValue,\r\n        \"adminId\": adminId\r\n      }\r\n    }).then((res) => {\r\n      if (res) {\r\n        message.success(\"修改成功\")\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 500);\r\n      } else {\r\n        message.error(\"修改失败\")\r\n      }\r\n    })\r\n  }\r\n\r\n  public handleCancel = () => {\r\n    this.setState({\r\n      editGroupModal: false\r\n    })\r\n  }\r\n\r\n  public radioChange = (e: any) => {\r\n    this.setState({\r\n      radioValue: e.target.value\r\n    })\r\n  }\r\n\r\n  public addRadioChange = (e: any) => {\r\n    this.setState({\r\n      groupId: e.target.value\r\n    })\r\n  }\r\n\r\n  public handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    const AvatarUrl = this.state.imageUrl\r\n    this.props.form.validateFieldsAndScroll((err: any, values: {\r\n      name: string,\r\n      pwd: string, groupId: number, realName: string, email: string, phone: string, cityCode: string\r\n    }) => {\r\n      const { name, pwd, groupId, realName, email, phone, cityCode } = values\r\n      if (!err) {\r\n        // console.log('Received values of form: ', values);\r\n        axios({\r\n          method: \"post\",\r\n          url: `/adminusers/add`,\r\n          data: {\r\n            name,\r\n            pwd,\r\n            realName,\r\n            groupId,\r\n            email,\r\n            phone,\r\n            cityCode,\r\n            icon: AvatarUrl\r\n          }\r\n        }).then((res: any) => {\r\n          if (res) {\r\n            message.success(\"添加成功\")\r\n            setTimeout(() => {\r\n              window.location.reload()\r\n            }, 500);\r\n          } else {\r\n            message.error(\"删除失败\")\r\n          }\r\n        })\r\n      }\r\n    });\r\n  };\r\n\r\n  public handleUpload = ({ fileList, file }: { fileList: any, file: any }) => {\r\n\r\n\r\n    const imgName = file.name\r\n\r\n\r\n    let adminId: string | null = localStorage.getItem(\"adminId\")\r\n\r\n    const timeStamp = new Date().getTime().toString()\r\n\r\n    if (adminId) {\r\n      while (adminId.length < 36) {\r\n        adminId += \"x\"\r\n      }\r\n    } else {\r\n      alert(\"请重新登陆\")\r\n    }\r\n\r\n    const fileName = `${adminId}${timeStamp}ao12`\r\n\r\n    fileList.map((item: any, index: number) => {\r\n      if (item.name === imgName) {\r\n        item.name = fileName\r\n      }\r\n      return\r\n    })\r\n\r\n    const upToken = localStorage.getItem('uploadToken')  // 获得token\r\n\r\n    if (upToken) {\r\n      sendToQiniu(file, fileName, upToken, \"ao\") // 发送到七牛\r\n    }\r\n\r\n    const ImageString = concatImageString(fileList)\r\n\r\n    this.setState({\r\n      files: fileList,\r\n      \"imageUrl\": ImageString\r\n    })\r\n\r\n  }\r\n\r\n  public render() {\r\n\r\n    const That = this\r\n\r\n    const { selectedRowKeys, tableData, roleChildrenTableData, roleGroupId, menus, menusList } = this.state;\r\n\r\n    let { filteredInfo }: any = this.state;\r\n\r\n    filteredInfo = filteredInfo || {};\r\n\r\n    const columns = [{\r\n      title: '用户名',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    }, {\r\n      title: '图片',\r\n      dataIndex: 'image',\r\n      key: 'image',\r\n      render: (text: any, record: any) => {\r\n\r\n        if (record.image !== \"\") {\r\n\r\n          const imageUrlList = record.image.split(',')\r\n\r\n          const images = imageUrlList.map((item: string, index: number) => (\r\n            <a href=\"javascript:void(0);\" key={index} onClick={() => {\r\n              That.setState({\r\n                imageSrc: item,\r\n                showImage: true,\r\n              })\r\n            }}>点击查看</a>\r\n          ))\r\n\r\n          return images\r\n\r\n        } else {\r\n\r\n          return <span>暂无</span>\r\n\r\n        }\r\n\r\n      }\r\n    }, {\r\n      title: '角色类型',\r\n      dataIndex: 'usertype',\r\n      key: 'usertype',\r\n    }, {\r\n      title: '真实姓名',\r\n      dataIndex: 'realName',\r\n      key: 'realName',\r\n    },\r\n    {\r\n      title: '城市',\r\n      dataIndex: 'cityCode',\r\n      key: 'cityCode',\r\n      render: (text: any, record: any) => {\r\n        const type = record.cityCode === \"321000\" ? 0 : 1;\r\n        if (record.cityCode) {\r\n          return <CityCodeBox type={type} />\r\n        } else {\r\n          return \"----\"\r\n        }\r\n      }\r\n    }, {\r\n      title: '绑定手机',\r\n      dataIndex: 'phone',\r\n      key: 'phone',\r\n    },\r\n    {\r\n      title: 'IP',\r\n      dataIndex: 'ip',\r\n      key: 'ip',\r\n    },\r\n    {\r\n      title: '注册时间',\r\n      dataIndex: 'registertime',\r\n      key: 'registertime',\r\n    },\r\n    {\r\n      title: '最后登陆时间',\r\n      dataIndex: 'lastlogintime',\r\n      key: 'lastlogintime',\r\n    }, {\r\n      title: '操作',\r\n      dataIndex: 'operation',\r\n      key: 'operation',\r\n      render: (text: any, record: any) => {\r\n        return (\r\n          <span>\r\n            <a href=\"javascript:;\" onClick={this.editGroup.bind(this, record)} style={{ marginRight: 20 }}>改变角色</a>\r\n          </span>\r\n        )\r\n      }\r\n    }];\r\n\r\n    const rowSelection = {\r\n      selectedRowKeys,\r\n      onChange: this.onSelectChange\r\n    };\r\n\r\n    const hasSelected = selectedRowKeys.length > 0;\r\n\r\n    const selectOptions = menus.map((item: any, index: number) => {\r\n      return (\r\n        <Option value={item.path} key={index}>{item.name}</Option>\r\n      )\r\n    })\r\n\r\n    const checkboxOptions = menusList.map((item: any, index) => {\r\n      return {\r\n        label: item.authName,\r\n        value: item.id,\r\n      }\r\n    })\r\n\r\n    const radios = this.state.editGroupData.map((item: any, index) => {\r\n      return (\r\n        <Radio.Button value={item.id} key={index}>{item.roleName}</Radio.Button>\r\n      )\r\n    })\r\n\r\n    const addRadios = this.state.groupData.map((item: any, index) => {\r\n      return (\r\n        <Radio.Button value={item.id} key={index}>{item.roleName}</Radio.Button>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div>\r\n        <div style={{ marginBottom: 16, textAlign: \"left\" }}>\r\n          <Button type=\"primary\" onClick={this.addRole.bind(this)} style={{ marginRight: 20 }}>\r\n            添加\r\n          </Button>\r\n          <Button type=\"danger\" disabled={!hasSelected} onClick={() => {\r\n            this.deleteRole()\r\n          }}>\r\n            删除\r\n          </Button>\r\n          <span style={{ marginLeft: 8 }}>\r\n            {hasSelected ? `选择了${selectedRowKeys.length}项` : ''}\r\n          </span>\r\n        </div>\r\n        <div>\r\n          <Table rowSelection={rowSelection} columns={columns} dataSource={tableData}\r\n            pagination={{ pageSize: 10 }}\r\n            onChange={this.handleChange}\r\n            locale={{ filterConfirm: \"确定\", filterReset: \"重置\", emptyText: \"暂无数据\" }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Drawer\r\n            width={500}\r\n            title=\"添加用户\"\r\n            placement=\"right\"\r\n            closable={true}\r\n            onClose={() => { this.setState({ visible: false, files: [] }) }}\r\n            visible={this.state.visible}\r\n          >\r\n            <Form onSubmit={this.handleSubmit}>\r\n              <Form.Item label=\"用户名\" hasFeedback={true} style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('name', {\r\n                  initialValue: \"\",\r\n                  setFieldsValue: this.state.name,\r\n                  rules: [{ required: true, message: '请输入用户名!' }],\r\n                })(\r\n                  <Input placeholder=\"请输入用户名\" onChange={(e: any) => { this.setState({ name: e.target.value }) }} />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item label=\"设密码\" hasFeedback={true} style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('pwd', {\r\n                  initialValue: \"\",\r\n                  setFieldsValue: this.state.pwd,\r\n                  rules: [{ required: true, message: '请输入密码!' }],\r\n                })(\r\n                  <Input placeholder=\"请输入用户名\" onChange={(e: any) => { this.setState({ name: e.target.value }) }} />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item label=\"真实姓名\" hasFeedback={true} style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('realName', {\r\n                  initialValue: \"\",\r\n                  setFieldsValue: this.state.realName,\r\n                  rules: [{ required: true, message: '请输入真实姓名!' }],\r\n                })(\r\n                  <Input placeholder=\"请输入真实姓名\" onChange={(e: any) => { this.setState({ realName: e.target.value }) }} />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item label=\"手机号\" hasFeedback={true} style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('phone', {\r\n                  initialValue: \"\",\r\n                  setFieldsValue: this.state.phone,\r\n                  rules: [{ required: true, message: '请输入正确的手机号!', pattern: /^1[0-9]{10}$/ }],\r\n                })(\r\n                  <Input placeholder=\"请输入正确的手机号\" onChange={(e: any) => { this.setState({ phone: e.target.value }) }} />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item label=\"邮箱\" hasFeedback={true} style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('email', {\r\n                  initialValue: \"\",\r\n                  setFieldsValue: this.state.email,\r\n                  rules: [{\r\n                    required: false,\r\n                    message: '请输入邮箱!'\r\n                  }],\r\n                })(\r\n                  <Input placeholder=\"请输入邮箱\" onChange={(e: any) => { this.setState({ email: e.target.value }) }} />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item label=\"角色\" style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('groupId', {\r\n                  initialValue: 1,\r\n                  setFieldsValue: this.state.groupId,\r\n                  rules: [{ required: true, message: '请选择!' }],\r\n                })(\r\n                  <Radio.Group buttonStyle=\"solid\"\r\n                    onChange={this.addRadioChange.bind(this)}\r\n                  >\r\n                    {\r\n                      addRadios\r\n                    }\r\n                  </Radio.Group>)}\r\n              </Form.Item>\r\n              <Form.Item label=\"城市\" style={{ marginBottom: 0 }}>\r\n                {this.props.form.getFieldDecorator('cityCode', {\r\n                  initialValue: this.state.cityCode,\r\n                  setFieldsValue: this.state.cityCode,\r\n                  rules: [{ required: true, message: '请选择城市!' }],\r\n                })(\r\n                  <Radio.Group buttonStyle=\"solid\"\r\n                    onChange={(e: any) => { this.setState({ cityCode: e.target.value }) }}\r\n                  >\r\n                    <Radio.Button value=\"321000\">扬州</Radio.Button>\r\n                    <Radio.Button value=\"340300\">蚌埠</Radio.Button>\r\n                  </Radio.Group>)}\r\n              </Form.Item>\r\n              <Form.Item label=\"头像\" style={{ marginBottom: 0 }}>\r\n                <Dragger className=\"Dragger\" onChange={this.handleUpload} beforeUpload={(file: any) => {\r\n                  this.setState({\r\n                    files: [...this.state.files, file]\r\n                  })\r\n                  return false\r\n                }}>\r\n                  <p className=\"ant-upload-drag-icon\">\r\n                    <Icon type=\"inbox\" />\r\n                  </p>\r\n                  <p className=\"ant-upload-hint\">点击或拖拽图片至此处</p>\r\n                </Dragger>\r\n              </Form.Item>\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  left: 0,\r\n                  bottom: 0,\r\n                  width: '100%',\r\n                  borderTop: '1px solid #e9e9e9',\r\n                  padding: '10px 16px',\r\n                  background: '#fff',\r\n                  textAlign: 'right',\r\n                }}\r\n              >\r\n                <Button onClick={() => { this.setState({ visible: false }) }} style={{ marginRight: 8 }}>\r\n                  取消\r\n                </Button>\r\n                <Button type=\"primary\" block={false} htmlType=\"submit\"\r\n                  className=\"login-form-button\"\r\n                  disabled={hasErrors(this.props.form.getFieldsError())}>\r\n                  确认\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          </Drawer>\r\n        </div>\r\n        <div>\r\n          <Drawer\r\n            width={800}\r\n            title=\"编辑用户权限\"\r\n            placement=\"right\"\r\n            closable={true}\r\n            onClose={() => {\r\n              this.setState({ editVisible: false, files: [] })\r\n            }}\r\n            visible={this.state.editVisible}\r\n          >\r\n            <div style={{ marginBottom: 25 }}>\r\n              <span>角色名：</span>\r\n              <Input style={{ width: \"70%\" }} placeholder=\"请输入分类名\" onChange={(e: any) => { this.setState({ defaultRoleName: e.target.value }) }}\r\n                defaultValue={this.state.defaultRoleName}\r\n                value={this.state.defaultRoleName}\r\n              />\r\n            </div>\r\n            <RoleChildrenTable tableData={roleChildrenTableData} roleGroupId={roleGroupId} editData={this.editSubmitRole.bind(this)} />\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                left: 0,\r\n                bottom: 0,\r\n                width: '100%',\r\n                borderTop: '1px solid #e9e9e9',\r\n                padding: '10px 16px',\r\n                background: '#fff',\r\n                textAlign: 'right',\r\n              }}\r\n            >\r\n              <Button onClick={() => { this.setState({ editVisible: false }) }} style={{ marginRight: 8 }}>\r\n                取消\r\n              </Button>\r\n              <Button onClick={() => {\r\n                this.submitRole()\r\n              }}\r\n                type=\"primary\">\r\n                确认\r\n            </Button>\r\n            </div>\r\n          </Drawer>\r\n          <Drawer\r\n            width={500}\r\n            title=\"添加菜单权限\"\r\n            placement=\"right\"\r\n            closable={true}\r\n            onClose={() => {\r\n              this.setState({ addVisible: false, })\r\n            }}\r\n            visible={this.state.addVisible}\r\n          >\r\n            <div style={{ marginBottom: 25 }}>\r\n              <span>菜单名：</span>\r\n              <Select style={{ width: 320 }} onChange={this.onMenuSelectChange.bind(this)}>\r\n                {selectOptions}\r\n              </Select>\r\n            </div>\r\n            <div style={{ marginTop: 25 }}>\r\n              <span style={{ marginRight: 8 }}>子菜单: </span>\r\n              {\r\n                checkboxOptions.length > 0 ?\r\n                  <Checkbox.Group options={checkboxOptions} onChange={this.onCheckboxSelectChange.bind(this)} style={{\r\n                    display: \"block\",\r\n                    marginTop: 16\r\n                  }} />\r\n                  :\r\n                  <span>请先选择菜单</span>\r\n              }\r\n            </div>\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                left: 0,\r\n                bottom: 0,\r\n                width: '100%',\r\n                borderTop: '1px solid #e9e9e9',\r\n                padding: '10px 16px',\r\n                background: '#fff',\r\n                textAlign: 'right',\r\n              }}\r\n            >\r\n              <Button onClick={() => { this.setState({ addVisible: false }) }} style={{ marginRight: 8 }}>\r\n                取消\r\n              </Button>\r\n              <Button onClick={this.sumitAddMenu.bind(this)}\r\n                type=\"primary\">\r\n                确认\r\n            </Button>\r\n            </div>\r\n          </Drawer>\r\n          <Modal\r\n            title=\"选择角色\"\r\n            visible={this.state.editGroupModal}\r\n            onOk={this.handleOk}\r\n            onCancel={this.handleCancel}\r\n            okText=\"确认\"\r\n            cancelText=\"取消\"\r\n          >\r\n            <div>\r\n              <Radio.Group defaultValue=\"a\" buttonStyle=\"solid\"\r\n                onChange={this.radioChange.bind(this)}\r\n              >\r\n                {\r\n                  radios\r\n                }\r\n              </Radio.Group>\r\n            </div>\r\n          </Modal>\r\n          <Modal\r\n            visible={this.state.showImage}\r\n            onCancel={() => this.setState({ showImage: false })}\r\n            footer={null}\r\n            destroyOnClose={true}\r\n          >\r\n            {PopImage(this.state.imageSrc)}\r\n          </Modal>\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nconst AdminUsersPage = Form.create({ name: 'validate' })(AdminUsersPageWrap);\r\n\r\nexport default AdminUsersPage"],"sourceRoot":""}