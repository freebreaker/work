(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{518:function(e,t,n){var a=n(519);"string"===typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(55)(a,i);a.locals&&(e.exports=a.locals)},519:function(e,t,n){(e.exports=n(50)(!1)).push([e.i,"",""])},547:function(e,t,n){"use strict";n.r(t);var a=n(45),i=n(46),l=n(49),o=n(47),r=n(164),s=n(48),d=n(0),u=n(94),c=n(476),m=n(120),p=n(31),h=n(471),f=n(475),g=n(465),b=n(82),y=n(125),v=(n(518),n(21)),C=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u6a21\u5757\u540d",dataIndex:"name",key:"name"},{title:"\u6743\u9650\u660e\u7ec6",dataIndex:"details",key:"details",render:function(t,n){var a=t.allOptions.map(function(e,t){return{label:e.authName,value:e.id}}),i=t.options.map(function(e,t){return e.id});return d.createElement("span",null,d.createElement(b.a.Group,{options:a,defaultValue:i,onChange:function(t){return e.props.editData(n.key,t)}}))}}];return d.createElement("div",null,d.createElement(h.a,{columns:t,dataSource:this.props.tableData,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}}))}}]),t}(d.Component),E=n(37),k=n.n(E);n.d(t,"default",function(){return w});var I=u.a.Option,w=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,s=new Array(i),d=0;d<i;d++)s[d]=arguments[d];return(n=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={files:[],updateId:1,selectedRowKeys:[],selectedPetKeys:[],selectedPetTypeKeys:[],loading:!1,filteredInfo:null,sortedInfo:"",visible:!1,editVisible:!1,addVisible:!1,value:2,imageUrl:"",defaultRoleName:"",defalutSizeValue:6,editSizeVisible:!1,tableData:[],resTableData:[],resRoleTableData:[],showImage:!1,imageSrc:"",roleChildrenTableData:[],roleGroupId:1,submitMenu:[],menus:[],menuName:"",menuUrl:"",menuAddMenuChildren:[],menusList:[],editGroupModal:!1,editGroupData:[],groupData:[],radioValue:"",adminId:1,name:"",pwd:"",groupId:1},n.onSelectChange=function(e){n.setState({selectedRowKeys:e})},n.handleChange=function(e,t,a){console.log("Various parameters",e,t,a),n.setState({filteredInfo:t,sortedInfo:a})},n.handleDelete=function(e){console.log(e)},n.addRole=function(){n.showDrawer()},n.addAdminUser=function(){var e=n.state,t=e.name,a=e.pwd,i=e.groupId;Object(v.a)({method:"post",url:"/adminusers/add",data:{name:t,pwd:a,groupId:i}}).then(function(e){e?(c.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):c.a.error("\u5220\u9664\u5931\u8d25")})},n.addMenu=function(e){var t=Object(r.a)(n);Object(v.a)({method:"get",url:"/menu/list?roleGroupId=".concat(e.key)}).then(function(n){n&&t.setState({addVisible:!0,menus:n,roleGroupId:e.key})})},n.editRole=function(e){var t=Object(r.a)(n);console.log("----"===e.size,e),Object(v.a)({method:"get",url:"/role/menus?id=".concat(e.key)}).then(function(n){if(console.log(n),n){var a=n.map(function(e,t){return{key:e.id,name:e.menuName,details:{options:e.menuChildren,allOptions:e.allMenuChildren},menuChildrenIds:e.menuIds}});t.setState({editVisible:!0,defaultRoleName:e.name,roleGroupId:e.key,roleChildrenTableData:a})}})},n.showDrawer=function(){var e=Object(r.a)(n);Object(v.a)({method:"get",url:"/role/list"}).then(function(t){t&&e.setState({groupData:t,visible:!0})})},n.deleteRole=function(){var e=n.state.selectedRowKeys;Object(v.a)({method:"post",url:"/user/delete",data:{ids:e}}).then(function(e){e?(c.a.success("\u5220\u9664\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):c.a.error("\u5220\u9664\u5931\u8d25")})},n.editSubmitRole=function(e,t){var a=n.state.submitMenu,i=a.map(function(n){return n.id===e?{id:e,ids:t}:n});a.find(function(t){return t.id===e})?n.setState({submitMenu:i}):(i.push({id:e,ids:t}),n.setState({submitMenu:i}))},n.submitRole=function(){Object(v.a)({method:"post",url:"/role/edit",data:{editArr:n.state.submitMenu}}).then(function(e){e?(c.a.success("\u4fee\u6539\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):c.a.error("\u4fee\u6539\u5931\u8d25")})},n.onMenuSelectChange=function(e,t){Object(v.a)({method:"get",url:"/menu/path?name=".concat(e)}).then(function(a){a&&(console.log(a),n.setState({menusList:a,menuUrl:e,menuName:t.props.children}))})},n.onCheckboxSelectChange=function(e){n.setState({menuAddMenuChildren:e})},n.sumitAddMenu=function(){var e=n.state,t=e.menuName,a=e.roleGroupId,i=e.menuUrl,l=e.menuAddMenuChildren;Object(v.a)({method:"post",url:"/menu/add",data:{roleGroupId:a,menuName:t,menuUrl:i,menuAddMenuChildren:l}}).then(function(e){e?(c.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},1e3)):c.a.error("\u6dfb\u52a0\u5931\u8d25")})},n.editGroup=function(e){console.log(e);var t=Object(r.a)(n);Object(v.a)({method:"get",url:"/role/list"}).then(function(n){n&&t.setState({editGroupModal:!0,editGroupData:n,adminId:e.key})})},n.handleOk=function(){var e=n.state,t=e.radioValue,a=e.adminId;Object(v.a)({method:"post",url:"/adminusers/group",data:{groupId:t,adminId:a}}).then(function(e){e?(c.a.success("\u4fee\u6539\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):c.a.error("\u4fee\u6539\u5931\u8d25")})},n.handleCancel=function(){n.setState({editGroupModal:!1})},n.radioChange=function(e){console.log(e.target.value),n.setState({radioValue:e.target.value})},n.addRadioChange=function(e){n.setState({groupId:e.target.value})},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(v.a)({method:"get",url:"/adminusers/list"}).then(function(t){if(t.length>0){var n=t.map(function(e,t){return{key:e.id,name:e.name,nickname:e.nickname,usertype:e.groupId?e.groupId.roleName:"----",phone:e.tel,ip:e.ip?e.ip:"----",registertime:e.ct?k()(parseInt(e.ct,10)).format("YYYY-MM-DD H:mm:ss"):"----",lastlogintime:e.lastLoginTime?k()(parseInt(e.lastLoginTime,10)).format("YYYY-MM-DD H:mm:ss"):"----"}});e.setState({tableData:n,resTableData:t,resRoleTableData:t})}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedRowKeys,a=t.tableData,i=t.roleChildrenTableData,l=t.roleGroupId,o=t.menus,r=t.menusList,s=this.state.filteredInfo;s=s||{};var c=[{title:"\u7528\u6237\u540d",dataIndex:"name",key:"name"},{title:"\u6635\u79f0",dataIndex:"nickname",key:"nickname"},{title:"\u7528\u6237\u7c7b\u578b",dataIndex:"usertype",key:"usertype"},{title:"\u7ed1\u5b9a\u624b\u673a",dataIndex:"phone",key:"phone"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"registertime",key:"registertime"},{title:"\u6700\u540e\u767b\u9646\u65f6\u95f4",dataIndex:"lastlogintime",key:"lastlogintime"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",key:"createtime"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,n){return d.createElement("span",null,d.createElement("a",{href:"javascript:;",onClick:e.editGroup.bind(e,n),style:{marginRight:20}},"\u6539\u53d8\u89d2\u8272"))}}],v={selectedRowKeys:n,onChange:this.onSelectChange},E=n.length>0,k=o.map(function(e,t){return d.createElement(I,{value:e.path,key:t},e.name)}),w=r.map(function(e,t){return{label:e.authName,value:e.id}}),S=this.state.editGroupData.map(function(e,t){return d.createElement(m.a.Button,{value:e.id,key:t},e.roleName)}),x=this.state.groupData.map(function(e,t){return d.createElement(m.a.Button,{value:e.id,key:t},e.roleName)});return d.createElement("div",null,d.createElement("div",{style:{marginBottom:16,textAlign:"left"}},d.createElement(p.a,{type:"primary",onClick:this.addRole.bind(this),style:{marginRight:20}},"\u6dfb\u52a0"),d.createElement(p.a,{type:"danger",disabled:!E,onClick:function(){e.deleteRole()}},"\u5220\u9664"),d.createElement("span",{style:{marginLeft:8}},E?"\u9009\u62e9\u4e86".concat(n.length,"\u9879"):"")),d.createElement("div",null,d.createElement(h.a,{rowSelection:v,columns:c,dataSource:a,pagination:{pageSize:10},onChange:this.handleChange,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}})),d.createElement("div",null,d.createElement(f.a,{width:500,title:"\u6dfb\u52a0\u7528\u6237",placement:"right",closable:!0,onClose:function(){e.setState({visible:!1,files:[]})},visible:this.state.visible},d.createElement("div",null,d.createElement("span",null,"\u7528\u6237\u540d\uff1a"),d.createElement(g.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onChange:function(t){e.setState({name:t.target.value})}})),d.createElement("div",{style:{margin:"25px 0"}},d.createElement("span",null,"\u8bbe\u5bc6\u7801\uff1a"),d.createElement(g.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){e.setState({pwd:t.target.value})}})),d.createElement("div",null,d.createElement("span",null,"\u8bbe\u89d2\u8272\uff1a"),d.createElement(m.a.Group,{defaultValue:1,buttonStyle:"solid",onChange:this.addRadioChange.bind(this)},x)),d.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},d.createElement(p.a,{onClick:function(){e.setState({visible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),d.createElement(p.a,{onClick:function(){e.setState({visible:!0}),e.addAdminUser()},type:"primary"},"\u786e\u5b9a")))),d.createElement("div",null,d.createElement(f.a,{width:800,title:"\u7f16\u8f91\u7528\u6237\u6743\u9650",placement:"right",closable:!0,onClose:function(){e.setState({editVisible:!1,files:[]})},visible:this.state.editVisible},d.createElement("div",{style:{marginBottom:25}},d.createElement("span",null,"\u89d2\u8272\u540d\uff1a"),d.createElement(g.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(t){e.setState({defaultRoleName:t.target.value})},defaultValue:this.state.defaultRoleName,value:this.state.defaultRoleName})),d.createElement(C,{tableData:i,roleGroupId:l,editData:this.editSubmitRole.bind(this)}),d.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},d.createElement(p.a,{onClick:function(){e.setState({editVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),d.createElement(p.a,{onClick:function(){e.submitRole()},type:"primary"},"\u786e\u8ba4"))),d.createElement(f.a,{width:500,title:"\u6dfb\u52a0\u83dc\u5355\u6743\u9650",placement:"right",closable:!0,onClose:function(){e.setState({addVisible:!1})},visible:this.state.addVisible},d.createElement("div",{style:{marginBottom:25}},d.createElement("span",null,"\u83dc\u5355\u540d\uff1a"),d.createElement(u.a,{style:{width:320},onChange:this.onMenuSelectChange.bind(this)},k)),d.createElement("div",{style:{marginTop:25}},d.createElement("span",{style:{marginRight:8}},"\u5b50\u83dc\u5355: "),w.length>0?d.createElement(b.a.Group,{options:w,onChange:this.onCheckboxSelectChange.bind(this),style:{display:"block",marginTop:16}}):d.createElement("span",null,"\u8bf7\u5148\u9009\u62e9\u83dc\u5355")),d.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},d.createElement(p.a,{onClick:function(){e.setState({addVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),d.createElement(p.a,{onClick:this.sumitAddMenu.bind(this),type:"primary"},"\u786e\u8ba4"))),d.createElement(y.a,{title:"\u9009\u62e9\u89d2\u8272",visible:this.state.editGroupModal,onOk:this.handleOk,onCancel:this.handleCancel,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},d.createElement("div",null,d.createElement(m.a.Group,{defaultValue:"a",buttonStyle:"solid",onChange:this.radioChange.bind(this)},S)))))}}]),t}(d.Component)}}]);
//# sourceMappingURL=15.83bbb770.chunk.js.map