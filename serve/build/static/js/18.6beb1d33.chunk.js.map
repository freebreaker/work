{"version":3,"sources":["webpack:///./src/pages/divide/vaccine/index.less?d7d7","pages/divide/vaccine/index.less","pages/divide/vaccine/index.tsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","TextArea","Input","Dragger","Upload","VaccineDivide","state","files","updateId","selectedRowKeys","selectedPetKeys","loading","filteredInfo","sortedInfo","visible","editVisible","value","imageUrl","defaultVaccineBrandName","defalutSizeValue","editSizeVisible","tableData","resTableData","showImage","imageSrc","description","onSelectChange","_this","setState","handleChange","pagination","filters","sorter","console","log","handleDelete","key","addVaccineBrand","showDrawer","editVaccineBrand","record","size","name","deleteVaccineBrand","axios","method","url","data","ids","then","res","message","success","setTimeout","window","location","reload","error","submitVaccineBrand","_this$state","image","editSubmitVaccineBrand","_this$state2","id","handleUpload","_ref","fileList","file","imgName","adminId","localStorage","getItem","timeStamp","Date","getTime","toString","length","alert","fileName","concat","map","item","index","upToken","sendToQiniu","ImageString","concatImageString","That","this","creatTime","ct","moment","parseInt","format","modifiedTime","mt","operation","FileList","Object","E_pet_admin_web_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","_this2","_this$state3","imgSrc","columns","title","dataIndex","render","text","split","react__WEBPACK_IMPORTED_MODULE_6__","href","onClick","bind","rowSelection","onChange","hasSelected","style","marginBottom","textAlign","antd__WEBPACK_IMPORTED_MODULE_10__","type","marginRight","disabled","marginLeft","antd__WEBPACK_IMPORTED_MODULE_11__","dataSource","pageSize","locale","filterConfirm","filterReset","emptyText","antd__WEBPACK_IMPORTED_MODULE_12__","width","placement","closable","onClose","margin","antd__WEBPACK_IMPORTED_MODULE_7__","placeholder","e","target","display","height","className","beforeUpload","antd__WEBPACK_IMPORTED_MODULE_13__","position","left","bottom","borderTop","padding","background","defaultValue","antd__WEBPACK_IMPORTED_MODULE_14__","onCancel","footer","destroyOnClose","src","alt","React"],"mappings":"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","file":"static/js/18.6beb1d33.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".Box {\\n  margin: 20px 0;\\n  vertical-align: inherit;\\n  display: flex;\\n  align-items: flex-start;\\n}\\n.Box .Dragger {\\n  width: 70%;\\n  display: inline-block;\\n}\\n\", \"\"]);\n\n","import * as React from 'react';\r\nimport {\r\n    Table, Button, Drawer, Input, Icon, Upload, message, Modal\r\n} from 'antd';\r\nimport './index.less';\r\nimport axios from '../../../util/Axios';\r\nimport { sendToQiniu, concatImageString } from '../../../util/sendToQiniu';\r\nimport moment from 'moment'\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst Dragger = Upload.Dragger;\r\n\r\nconst PopImage = (imgSrc: string) => (\r\n    <img src={imgSrc} alt=\"\" style={{ width: \"100%\" }} />\r\n)\r\n\r\nexport default class VaccineDivide extends React.Component<any, any> {\r\n\r\n    public state = {\r\n        files: [],\r\n        updateId: 1, // edit id 要更新的id\r\n        selectedRowKeys: [], // Check here to configure the default column\r\n        selectedPetKeys: [],\r\n        loading: false,\r\n        filteredInfo: null,\r\n        sortedInfo: \"\",\r\n        visible: false,\r\n        editVisible: false,\r\n        value: 3,  // 默认选择的一级分类\r\n        imageUrl: \"\",\r\n        defaultVaccineBrandName: \"\", // 编辑疫苗名字\r\n        defalutSizeValue: 6, // 编辑疫苗体型\r\n        editSizeVisible: false,  // 编辑疫苗体型选项是否显示\r\n        tableData: [],\r\n        resTableData: [],\r\n        showImage: false,\r\n        imageSrc: \"\",\r\n        description: \"\"\r\n    };\r\n\r\n    public componentDidMount() {\r\n        const That = this\r\n        axios({\r\n            method: \"get\",\r\n            url: \"/vaccine/list\"\r\n        }).then((res: any) => {\r\n            if (res && res.length > 0) {\r\n                const tableData = res.map((item: any, index: number) => {\r\n                    return {\r\n                        key: item.id,  // key 应带对应data id \r\n                        name: item.name,\r\n                        image: item.image ? item.image : \"暂无\",\r\n                        description: item.description ? item.description : \"----\",\r\n                        creatTime: item.ct ? moment(parseInt(item.ct, 10)).format('YYYY-MM-DD H:mm:ss') : \"----\",\r\n                        modifiedTime: item.mt ? moment(parseInt(item.mt, 10)).format('YYYY-MM-DD H:mm:ss') : \"----\",\r\n                        operation: \"\"\r\n                    }\r\n                })\r\n                That.setState({\r\n                    \"tableData\": tableData,\r\n                    resTableData: res\r\n                })\r\n                console.log(res)\r\n            }\r\n        })\r\n    }\r\n\r\n    public onSelectChange = (selectedRowKeys: any) => {\r\n        this.setState({ selectedRowKeys });\r\n    }\r\n\r\n    public handleChange = (pagination: any, filters: any, sorter: any) => {\r\n        console.log('Various parameters', pagination, filters, sorter);\r\n        this.setState({\r\n            filteredInfo: filters,\r\n            sortedInfo: sorter,\r\n        });\r\n    }\r\n\r\n    public handleDelete = (key: any) => {\r\n        console.log(key)\r\n    }\r\n\r\n    public addVaccineBrand = () => {\r\n        this.showDrawer()\r\n    }\r\n\r\n    public editVaccineBrand = (record: any) => {\r\n        console.log(record.size === \"----\", record)\r\n        this.setState({\r\n            editVisible: true,\r\n            editSizeVisible: record.size !== \"----\",\r\n            defaultVaccineBrandName: record.name,\r\n            updateId: record.key,\r\n            description: record.description\r\n        })\r\n    }\r\n\r\n    public showDrawer = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    public deleteVaccineBrand = () => {\r\n\r\n        const selectedRowKeys = this.state.selectedRowKeys\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/vaccine/delete\",\r\n            data: {\r\n                ids: selectedRowKeys\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"删除成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"删除失败\")\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    public submitVaccineBrand = () => {\r\n\r\n        const { defaultVaccineBrandName, imageUrl, description } = this.state\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/vaccine/add\",\r\n            data: {\r\n                name: defaultVaccineBrandName,\r\n                image: imageUrl,\r\n                \"description\": description\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"添加成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"添加失败\")\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    // 编辑疫苗类型提交\r\n\r\n    public editSubmitVaccineBrand = () => {\r\n\r\n        const { defaultVaccineBrandName, imageUrl, updateId, description } = this.state\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/vaccine/edit\",\r\n            data: {\r\n                id: updateId,\r\n                name: defaultVaccineBrandName,\r\n                \"description\": description,\r\n                image: imageUrl,\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"修改成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"修改失败\")\r\n            }\r\n        })\r\n    }\r\n\r\n    public beforeUpload(file: any) {\r\n\r\n        const FileList = this.state.files\r\n\r\n        this.setState({\r\n            files: [...FileList, file]\r\n        })\r\n\r\n        return false;\r\n    }\r\n\r\n    public handleUpload = ({ fileList, file }: { fileList: any, file: any }) => {\r\n\r\n        const imgName = file.name\r\n\r\n\r\n        let adminId: string | null = localStorage.getItem(\"adminId\")\r\n\r\n        const timeStamp = new Date().getTime().toString()\r\n    \r\n        if (adminId) {\r\n            while (adminId.length < 36) {\r\n                adminId += \"x\"\r\n            }\r\n        } else {\r\n            alert(\"请重新登陆\")\r\n        }\r\n    \r\n    \r\n        const fileName = `${adminId}${timeStamp}ao12`\r\n\r\n        fileList.map((item:any,index:number)=>{  \r\n            if(item.name === imgName){\r\n                item.name = fileName\r\n            }\r\n            return\r\n        })\r\n\r\n        console.log(fileList,file)\r\n\r\n        const upToken = localStorage.getItem('uploadToken')  // 获得token\r\n\r\n        if (upToken) {\r\n            sendToQiniu(file, fileName, upToken,\"ao\") // 发送到七牛\r\n        }\r\n\r\n        const ImageString = concatImageString(fileList)\r\n\r\n\r\n        this.setState({\r\n            files: fileList,\r\n            \"imageUrl\": ImageString\r\n        })\r\n\r\n    }\r\n\r\n    public render() {\r\n\r\n        const That = this\r\n\r\n        const { selectedRowKeys, tableData, description } = this.state;\r\n\r\n        let { filteredInfo }: any = this.state;\r\n\r\n        filteredInfo = filteredInfo || {};\r\n\r\n        const columns = [{\r\n            title: '疫苗名称',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        }, {\r\n            title: '图片',\r\n            dataIndex: 'image',\r\n            key: 'image',\r\n            render: (text: any, record: any) => {\r\n\r\n                if (record.image !== \"\") {\r\n\r\n                    const imageUrlList = record.image.split(',')\r\n\r\n                    const images = imageUrlList.map((item: string, index: number) => (\r\n                        <a href=\"javascript:void(0);\" key={index} onClick={() => {\r\n                            That.setState({\r\n                                showImage: true,\r\n                                imageSrc: item\r\n                            })\r\n                        }}>点击查看</a>\r\n                    ))\r\n\r\n                    return images\r\n\r\n                } else {\r\n\r\n                    return <span>暂无</span>\r\n\r\n                }\r\n\r\n            }\r\n        }, {\r\n            title: '疫苗描述',\r\n            dataIndex: 'description',\r\n            key: 'description',\r\n        }, {\r\n            title: '创建时间',\r\n            dataIndex: 'creatTime',\r\n            key: 'creatTime',\r\n        }, {\r\n            title: '操作',\r\n            dataIndex: 'operation',\r\n            key: 'operation',\r\n            render: (text: any, record: any) => {\r\n                return (\r\n                    <a href=\"javascript:;\" onClick={this.editVaccineBrand.bind(this, record)}>编辑</a>\r\n                )\r\n            }\r\n        }];\r\n\r\n        const rowSelection = {\r\n            selectedRowKeys,\r\n            onChange: this.onSelectChange\r\n        };\r\n\r\n        const hasSelected = selectedRowKeys.length > 0;\r\n\r\n        return (\r\n            <div>\r\n                <div style={{ marginBottom: 16, textAlign: \"left\" }}>\r\n                    <Button type=\"primary\" onClick={this.addVaccineBrand.bind(this)} style={{ marginRight: 20 }}>\r\n                        添加\r\n                    </Button>\r\n                    <Button type=\"danger\" disabled={!hasSelected} onClick={() => {\r\n                        this.deleteVaccineBrand()\r\n                    }}>\r\n                        删除\r\n                    </Button>\r\n\r\n                    <span style={{ marginLeft: 8 }}>\r\n                        {hasSelected ? `选择了${selectedRowKeys.length}项` : ''}\r\n                    </span>\r\n                </div>\r\n                <div>\r\n                    <Table rowSelection={rowSelection} columns={columns} dataSource={tableData}\r\n                        pagination={{ pageSize: 10 }}\r\n                        onChange={this.handleChange}\r\n                        locale={{ filterConfirm: \"确定\", filterReset: \"重置\", emptyText: \"暂无数据\" }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <Drawer\r\n                        width={500}\r\n                        title=\"添加疫苗类型\"\r\n                        placement=\"right\"\r\n                        closable={true}\r\n                        onClose={() => {\r\n                            this.setState({\r\n                                visible: false,\r\n                                defaultVaccineBrandName: \"\",\r\n                                description: \"\",\r\n                                imageSrc: \"\",\r\n                                updateId: \"\"\r\n                            })\r\n                        }}\r\n                        visible={this.state.visible}\r\n                    >\r\n                        <div style={{ margin: \"20px 0\" }}>\r\n                            <span>疫苗名称：</span>\r\n                            <Input style={{ width: \"70%\" }} placeholder=\"请输入疫苗名\" onChange={(e: any) => { this.setState({ defaultVaccineBrandName: e.target.value }) }} />\r\n                        </div>\r\n                        <div style={{ margin: \"20px 0\", display: \"flex\" }}>\r\n                            <span>疫苗描述：</span>\r\n                            <TextArea\r\n                                style={{ width: \"70%\", height: 120 }}\r\n                                placeholder=\"请输入疫苗描述\"\r\n                                onChange={(e: any) => { this.setState({ description: e.target.value }) }} />\r\n                        </div>\r\n                        <div className=\"Box\">\r\n                            <span>疫苗图片：</span>\r\n                            <Dragger className=\"Dragger\" onChange={this.handleUpload} beforeUpload={this.beforeUpload.bind(this)}>\r\n                                <p className=\"ant-upload-drag-icon\">\r\n                                    <Icon type=\"inbox\" />\r\n                                </p>\r\n                                <p className=\"ant-upload-hint\">点击或拖拽图片至此处</p>\r\n                            </Dragger>\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                position: 'absolute',\r\n                                left: 0,\r\n                                bottom: 0,\r\n                                width: '100%',\r\n                                borderTop: '1px solid #e9e9e9',\r\n                                padding: '10px 16px',\r\n                                background: '#fff',\r\n                                textAlign: 'right',\r\n                            }}\r\n                        >\r\n                            <Button onClick={() => { this.setState({ visible: false }) }} style={{ marginRight: 8 }}>\r\n                                取消\r\n                            </Button>\r\n                            <Button onClick={() => {\r\n                                this.setState({ visible: true })\r\n                                this.submitVaccineBrand()\r\n                            }}\r\n                                type=\"primary\">\r\n                                确定\r\n                            </Button>\r\n                        </div>\r\n                    </Drawer>\r\n                </div>\r\n                <div>\r\n                    <Drawer\r\n                        width={500}\r\n                        title=\"编辑疫苗类型\"\r\n                        placement=\"right\"\r\n                        closable={true}\r\n                        onClose={() => {\r\n                            this.setState({\r\n                                visible: false,\r\n                                defaultVaccineBrandName: \"\",\r\n                                description: \"\",\r\n                                imageSrc: \"\",\r\n                                updateId: \"\"\r\n                            })\r\n                        }}\r\n                        visible={this.state.editVisible}\r\n                    >\r\n                        <div>\r\n                            <span>疫苗分类：</span>\r\n                            <Input style={{ width: \"70%\" }} placeholder=\"请输入分类名\" onChange={(e: any) => { this.setState({ defaultVaccineBrandName: e.target.value }) }}\r\n                                defaultValue={this.state.defaultVaccineBrandName}\r\n                                value={this.state.defaultVaccineBrandName}\r\n                            />\r\n                        </div>\r\n                        <div style={{ margin: \"20px 0\", display: \"flex\" }}>\r\n                            <span>疫苗描述：</span>\r\n                            <TextArea\r\n                                defaultValue={description}\r\n                                style={{ width: \"70%\", height: 120 }}\r\n                                placeholder=\"请输入疫苗描述\"\r\n                                onChange={(e: any) => { this.setState({ description: e.target.value }) }} />\r\n                        </div>\r\n                        <div className=\"Box\">\r\n                            <span>疫苗图片：</span>\r\n                            <Dragger className=\"Dragger\" onChange={this.handleUpload}\r\n                                beforeUpload={this.beforeUpload.bind(this)}\r\n                            >\r\n                                <p className=\"ant-upload-drag-icon\">\r\n                                    <Icon type=\"inbox\" />\r\n                                </p>\r\n                                <p className=\"ant-upload-hint\">点击或拖拽图片至此处</p>\r\n                            </Dragger>\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                position: 'absolute',\r\n                                left: 0,\r\n                                bottom: 0,\r\n                                width: '100%',\r\n                                borderTop: '1px solid #e9e9e9',\r\n                                padding: '10px 16px',\r\n                                background: '#fff',\r\n                                textAlign: 'right',\r\n                            }}\r\n                        >\r\n                            <Button onClick={() => { this.setState({ editVisible: false }) }} style={{ marginRight: 8 }}>\r\n                                取消\r\n                            </Button>\r\n                            <Button onClick={() => {\r\n                                this.editSubmitVaccineBrand()\r\n                            }}\r\n                                type=\"primary\">\r\n                                确认\r\n                            </Button>\r\n                        </div>\r\n                    </Drawer>\r\n                    <Modal\r\n                        visible={this.state.showImage}\r\n                        onCancel={() => this.setState({ showImage: false })}\r\n                        footer={null}\r\n                        destroyOnClose={true}\r\n                    >\r\n                        {PopImage(this.state.imageSrc)}\r\n                    </Modal>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}