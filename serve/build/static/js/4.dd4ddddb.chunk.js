(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{479:function(e,t,a){},525:function(e,t,a){"use strict";a.r(t);a(175);var n=a(94),l=(a(238),a(92)),i=(a(237),a(185)),o=(a(110),a(53)),r=(a(235),a(177)),d=(a(52),a(18)),s=(a(180),a(69)),u=(a(109),a(46)),c=a(19),m=a(20),h=a(23),p=a(21),f=a(186),g=a(22),b=(a(176),a(79)),v=a(0),y=(a(479),a(38)),E=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u6a21\u5757\u540d",dataIndex:"name",key:"name"},{title:"\u6743\u9650\u660e\u7ec6",dataIndex:"details",key:"details",render:function(t,a){var n=t.allOptions.map(function(e,t){return{label:e.authName,value:e.id}}),i=t.options.map(function(e,t){return e.id});return v.createElement("span",null,v.createElement(l.a.Group,{options:n,defaultValue:i,onChange:function(t){return e.props.editData(a.key,t)}}))}}];return v.createElement("div",null,v.createElement(r.a,{columns:t,dataSource:this.props.tableData,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}}))}}]),t}(v.Component),C=a(67),w=a.n(C),k=(a(245),a(93));a.d(t,"default",function(){return I}),w.a.locale("zh-cn");var S=b.a.Option,I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={files:[],updateId:1,selectedRowKeys:[],selectedPetKeys:[],selectedPetTypeKeys:[],loading:!1,filteredInfo:null,sortedInfo:"",visible:!1,editVisible:!1,addVisible:!1,value:2,imageUrl:"",defaultRoleName:"",defalutSizeValue:6,editSizeVisible:!1,tableData:[],resTableData:[],resRoleTableData:[],showImage:!1,imageSrc:"",roleChildrenTableData:[],roleGroupId:1,submitMenu:[],menus:[],menuName:"",menuUrl:"",menuAddMenuChildren:[],menusList:[],editGroupModal:!1,editGroupData:[],groupData:[],radioValue:"",adminId:1,name:"",pwd:"",realName:"",phone:"",groupId:1,editPasswordAndRealName:!1,editId:0},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleChange=function(e,t,n){console.log("Various parameters",e,t,n),a.setState({filteredInfo:t,sortedInfo:n})},a.handleDelete=function(e){console.log(e)},a.addRole=function(){a.setState({visible:!0,editPasswordAndRealName:!1,name:"",pwd:void 0,realName:"",phone:""})},a.addAdminUser=function(){var e=a.state,t=e.name,n=e.pwd,l=e.realName,i=e.phone,o=e.editPasswordAndRealName,r=e.editId;""!==t?""!==n?(o?Object(k.f)(r,t,n,l,i):Object(k.a)(t,n,l,i)).then(function(e){e?(u.a.success("\u64cd\u4f5c\u6210\u529f"),e.success&&localStorage.setItem("token",e.token),setTimeout(function(){window.location.reload()},500)):u.a.error("\u64cd\u4f5c\u5931\u8d25")}):u.a.error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"):u.a.error("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01")},a.addMenu=function(e){var t=Object(f.a)(a);Object(y.a)({method:"get",url:"/menu/list?roleGroupId=".concat(e.key)}).then(function(a){a&&t.setState({addVisible:!0,menus:a,roleGroupId:e.key})})},a.editRole=function(e){var t=Object(f.a)(a);Object(y.a)({method:"get",url:"/role/menus?id=".concat(e.key)}).then(function(a){if(console.log(a),a){var n=a.map(function(e,t){return{key:e.id,name:e.menuName,details:{options:e.menuChildren,allOptions:e.allMenuChildren},menuChildrenIds:e.menuIds}});t.setState({editVisible:!0,defaultRoleName:e.name,roleGroupId:e.key,roleChildrenTableData:n})}})},a.deleteRole=function(){var e=a.state.selectedRowKeys;Object(y.a)({method:"post",url:"/adminusers/delete",data:{ids:e}}).then(function(e){e?(u.a.success("\u5220\u9664\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):u.a.error("\u5220\u9664\u5931\u8d25")})},a.editSubmitRole=function(e,t){var n=a.state.submitMenu,l=n.map(function(a){return a.id===e?{id:e,ids:t}:a});n.find(function(t){return t.id===e})?a.setState({submitMenu:l}):(l.push({id:e,ids:t}),a.setState({submitMenu:l}))},a.submitRole=function(){Object(y.a)({method:"post",url:"/role/edit",data:{editArr:a.state.submitMenu}}).then(function(e){e?(u.a.success("\u4fee\u6539\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):u.a.error("\u4fee\u6539\u5931\u8d25")})},a.onMenuSelectChange=function(e,t){Object(y.a)({method:"get",url:"/menu/path?name=".concat(e)}).then(function(n){n&&(console.log(n),a.setState({menusList:n,menuUrl:e,menuName:t.props.children}))})},a.onCheckboxSelectChange=function(e){a.setState({menuAddMenuChildren:e})},a.sumitAddMenu=function(){var e=a.state,t=e.menuName,n=e.roleGroupId,l=e.menuUrl,i=e.menuAddMenuChildren;Object(y.a)({method:"post",url:"/menu/add",data:{roleGroupId:n,menuName:t,menuUrl:l,menuAddMenuChildren:i}}).then(function(e){e?(u.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},1e3)):u.a.error("\u6dfb\u52a0\u5931\u8d25")})},a.editGroup=function(e){a.setState({visible:!0,editId:parseInt(e.key,10),editPasswordAndRealName:!0,name:e.name,pwd:e.pwd,realName:e.realName,phone:e.phone})},a.handleOk=function(){var e=a.state,t=e.radioValue,n=e.adminId;Object(y.a)({method:"post",url:"/adminusers/group",data:{groupId:t,adminId:n}}).then(function(e){e?(u.a.success("\u64cd\u4f5c\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):u.a.error("\u64cd\u4f5c\u5931\u8d25")})},a.handleCancel=function(){a.setState({editGroupModal:!1})},a.radioChange=function(e){console.log(e.target.value),a.setState({radioValue:e.target.value})},a.addRadioChange=function(e){a.setState({groupId:e.target.value})},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(y.a)({method:"get",url:"/adminusers/list"}).then(function(t){if(t.length>0){var a=t.map(function(e,t){return{key:e.id,name:e.name,realName:e.realName,phone:e.phone,createdAt:w()(e.createdAt).format("LLLL"),lastLoginAt:w()(e.lastLoginAt).format("LLLL")}});e.setState({tableData:a,resTableData:t,resRoleTableData:t})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,u=t.tableData,c=t.roleChildrenTableData,m=t.roleGroupId,h=t.menus,p=t.menusList,f=this.state.filteredInfo;f=f||{};var g=[{title:"\u7528\u6237\u540d",dataIndex:"name",key:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",key:"createdAt"},{title:"\u771f\u5b9e\u59d3\u540d",dataIndex:"realName",key:"realName"},{title:"\u624b\u673a\u53f7",dataIndex:"phone",key:"phone"},{title:"\u6700\u540e\u767b\u9646\u65f6\u95f4",dataIndex:"lastLoginAt",key:"lastLoginAt"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,a){return v.createElement("span",null,v.createElement("a",{href:"javascript:;",onClick:e.editGroup.bind(e,a),style:{marginRight:20}},"\u7f16\u8f91"))}}],y={selectedRowKeys:a,onChange:this.onSelectChange},C=a.length>0,w=h.map(function(e,t){return v.createElement(S,{value:e.path,key:t},e.name)}),k=p.map(function(e,t){return{label:e.authName,value:e.id}}),I=this.state.editGroupData.map(function(e,t){return v.createElement(s.a.Button,{value:e.id,key:t},e.roleName)});this.state.groupData.map(function(e,t){return v.createElement(s.a.Button,{value:e.id,key:t},e.roleName)});return v.createElement("div",null,v.createElement("div",{style:{marginBottom:16,textAlign:"left"}},v.createElement(d.a,{type:"primary",onClick:this.addRole.bind(this),style:{marginRight:20}},"\u6dfb\u52a0"),v.createElement(d.a,{type:"danger",disabled:!C,onClick:function(){e.deleteRole()}},"\u5220\u9664"),v.createElement("span",{style:{marginLeft:8}},C?"\u9009\u62e9\u4e86".concat(a.length,"\u9879"):"")),v.createElement("div",null,v.createElement(r.a,{rowSelection:y,columns:g,dataSource:u,pagination:{pageSize:10},onChange:this.handleChange,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}})),v.createElement("div",null,v.createElement(i.a,{width:500,title:this.state.editPasswordAndRealName?"\u7f16\u8f91\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",placement:"right",closable:!0,onClose:function(){e.setState({visible:!1,files:[]})},visible:this.state.visible},v.createElement("div",null,v.createElement("span",null,"\u8bbe\u7528\u6237\u540d\uff1a"),v.createElement(o.a,{style:{width:"70%"},required:!0,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}})),v.createElement("div",{style:{margin:"25px 0"}},v.createElement("span",null,"\u767b\u5f55\u5bc6\u7801\uff1a"),v.createElement(o.a.Password,{style:{width:"70%"},required:!0,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){e.setState({pwd:t.target.value})}})),v.createElement("div",null,v.createElement("span",null,"\u771f\u5b9e\u59d3\u540d\uff1a"),v.createElement(o.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u771f\u5b9e\u59d3\u540d",value:this.state.realName,onChange:function(t){e.setState({realName:t.target.value})}})),v.createElement("div",{style:{margin:"25px 0"}},v.createElement("span",null,"\u8bbe\u624b\u673a\u53f7\uff1a"),v.createElement(o.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",value:this.state.phone,onChange:function(t){e.setState({phone:t.target.value})}})),v.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},v.createElement(d.a,{onClick:function(){e.setState({visible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),v.createElement(d.a,{onClick:function(){e.setState({visible:!0}),e.addAdminUser()},type:"primary"},"\u786e\u5b9a")))),v.createElement("div",null,v.createElement(i.a,{width:800,title:"\u7f16\u8f91\u7528\u6237\u6743\u9650",placement:"right",closable:!0,onClose:function(){e.setState({editVisible:!1,files:[]})},visible:this.state.editVisible},v.createElement("div",{style:{marginBottom:25}},v.createElement("span",null,"\u89d2\u8272\u540d\uff1a"),v.createElement(o.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(t){e.setState({defaultRoleName:t.target.value})},defaultValue:this.state.defaultRoleName,value:this.state.defaultRoleName})),v.createElement(E,{tableData:c,roleGroupId:m,editData:this.editSubmitRole.bind(this)}),v.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},v.createElement(d.a,{onClick:function(){e.setState({editVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),v.createElement(d.a,{onClick:function(){e.submitRole()},type:"primary"},"\u786e\u8ba4"))),v.createElement(i.a,{width:500,title:"\u6dfb\u52a0\u83dc\u5355\u6743\u9650",placement:"right",closable:!0,onClose:function(){e.setState({addVisible:!1})},visible:this.state.addVisible},v.createElement("div",{style:{marginBottom:25}},v.createElement("span",null,"\u83dc\u5355\u540d\uff1a"),v.createElement(b.a,{style:{width:320},onChange:this.onMenuSelectChange.bind(this)},w)),v.createElement("div",{style:{marginTop:25}},v.createElement("span",{style:{marginRight:8}},"\u5b50\u83dc\u5355: "),k.length>0?v.createElement(l.a.Group,{options:k,onChange:this.onCheckboxSelectChange.bind(this),style:{display:"block",marginTop:16}}):v.createElement("span",null,"\u8bf7\u5148\u9009\u62e9\u83dc\u5355")),v.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},v.createElement(d.a,{onClick:function(){e.setState({addVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),v.createElement(d.a,{onClick:this.sumitAddMenu.bind(this),type:"primary"},"\u786e\u8ba4"))),v.createElement(n.a,{title:"\u9009\u62e9\u89d2\u8272",visible:this.state.editGroupModal,onOk:this.handleOk,onCancel:this.handleCancel,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},v.createElement("div",null,v.createElement(s.a.Group,{defaultValue:"a",buttonStyle:"solid",onChange:this.radioChange.bind(this)},I)))))}}]),t}(v.Component)}}]);
//# sourceMappingURL=4.dd4ddddb.chunk.js.map