(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{499:function(e,t,a){var n=a(500);"string"===typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(55)(n,i);n.locals&&(e.exports=n.locals)},500:function(e,t,a){(e.exports=a(50)(!1)).push([e.i,"",""])},529:function(e,t,a){"use strict";a.r(t);var n=a(27),i=a(28),l=a(31),r=a(29),o=a(30),s=a(0),c=a(94),p=a(472),d=a(465),m=a(476),u=a(477),f=a(37),h=a(471),g=a(475),b=a(470),I=a(540),v=a(530),y=a(9),k=(a(499),a(21)),E=c.a.Option,C=p.a.Dragger,V=d.a.TextArea,w=function(e){function t(){var e,a;Object(n.a)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o)))).state={updateId:1,selectedRowKeys:[],loading:!1,filteredInfo:null,sortedInfo:"",visible:!1,editVisible:!1,value:2,editSizeVisible:!1,tableData:[],resTableData:[],initDeviceValue:"1",name:"\u5ba0\u90fd",fileName:"",appId:"",appCode:5,appVersion:"",appUrl:"",description:"",forces:!1,cuserId:"",muserId:"",createTime:"",modifiedTime:""},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleChange=function(e,t,n){console.log("Various parameters",e,t,n),a.setState({filteredInfo:t,sortedInfo:n})},a.handleDelete=function(e){console.log(e)},a.editAppMsgs=function(e){console.log("----"===e.size,e),a.setState({editVisible:!0,editSizeVisible:"----"!==e.size,defaultPetName:e.name,updateId:e.key})},a.showDrawer=function(){a.setState({visible:!0})},a.deleteAppVersion=function(){var e=a.state.selectedRowKeys;console.log(e),Object(k.a)({method:"post",url:"/app/delete",data:{ids:e}}).then(function(e){e?(m.a.success("\u5220\u9664\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u5220\u9664\u5931\u8d25")})},a.submitAppVersionMsgs=function(){m.a.success("\u6821\u9a8c\u6210\u529f");var e=a.state,t=e.name,n=e.fileName,i=e.initDeviceValue,l=e.appId,r=e.appCode,o=e.appVersion,s=e.appUrl,c=e.description,p=e.forces;Object(k.a)({method:"post",url:"/app/upload",data:{name:t,fileName:n,deviceType:parseInt(i,10),appId:l,appCode:r.toString(),appVersion:o,appUrl:s,description:c,forces:p?1:0,cuserId:"cuserId",muserId:"muserId"}}).then(function(e){e?(m.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},1e3)):m.a.error("\u6dfb\u52a0\u5931\u8d25")})},a.downloadApk=function(e){e.appUrl?Object(k.a)({method:"get",url:"/app/download?name=".concat(e.fileName),responseType:"blob"}).then(function(t){var a=URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.href=a,n.download="".concat(e.fileName,".apk"),n.click(),window.URL.revokeObjectURL(a)}):m.a.error("\u6ca1\u6709\u6b64\u4e0b\u8f7d\u8def\u5f84")},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(k.a)({method:"get",url:"/app/versions"}).then(function(t){if(t.length>0){var a=t.map(function(e,t){return{key:e.id,name:"\u5ba0\u90fdAPP",type:1===e.deviceType?"\u5b89\u5353":"\u82f9\u679c",fileName:e.fileName?e.fileName:"----",appId:e.appId?e.appId:"----",appCode:e.appCode?e.appCode:"----",appVersion:e.appVersion?e.appVersion:"----",appUrl:e.url?e.url:"----",description:e.description?e.description:"----",forces:e.forces?"\u662f":"\u5426",creater:e.cuserId?e.cuserId:"----",laster:e.muserId?e.muserId:"----",operation:""}});e.setState({tableData:a})}})}},{key:"render",value:function(){var e=this,t=this,a=this.state,n=a.name,i=a.selectedRowKeys,l=a.tableData,r=a.initDeviceValue,o=a.appId,p=a.appCode,k=a.appVersion,w=a.forces,x=a.description,S=this.state.filteredInfo;S=S||{};var N=[{title:"\u5e94\u7528\u540d",dataIndex:"name",key:"name"},{title:"\u8bbe\u5907\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u6587\u4ef6\u540d",dataIndex:"fileName",key:"fileName"},{title:"app\u6807\u8bc6",dataIndex:"appId",key:"appId"},{title:"\u5e94\u7528\u7248\u672c\u4ee3\u7801",dataIndex:"appCode",key:"appCode"},{title:"\u5bf9\u5916\u7248\u672c",dataIndex:"appVersion",key:"appVersion"},{title:"\u5347\u7ea7\u94fe\u63a5",dataIndex:"appUrl",key:"appUrl",render:function(t,a){return s.createElement("a",{href:"javascript:;",onClick:e.downloadApk.bind(e,a),target:"_blank"},"\u70b9\u6b64\u4e0b\u8f7d")}},{title:"\u63cf\u8ff0",dataIndex:"description",key:"description"},{title:"\u662f\u5426\u5f3a\u5236\u66f4\u65b0",dataIndex:"forces",key:"forces"},{title:"\u521b\u5efa\u8005",dataIndex:"creater",key:"creater"},{title:"\u6700\u540e\u4fee\u6539\u8005",dataIndex:"laster",key:"laster"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"creatTime",key:"creatTime"},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"modifiedTime",key:"modifiedTime"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,a){return s.createElement("a",{href:"javascript:;",onClick:e.editAppMsgs.bind(e,a)},"\u7f16\u8f91")}}],A={selectedRowKeys:i,onChange:this.onSelectChange},T=i.length>0,D=localStorage.getItem("token"),j=this.props.form.getFieldDecorator,F={name:"file",multiple:!0,action:"/app/apk",data:{appVersion:k},withCredentials:!0,headers:{Authorization:D||""},onChange:function(e){var a=e.file.status;"uploading"!==a&&0===e.fileList.length&&t.setState({appUrl:"",fileName:""}),"done"===a?(m.a.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),t.setState({appUrl:e.file.response.filePath,fileName:e.file.response.fileName})):"error"===a&&m.a.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25"))}};return s.createElement("div",null,s.createElement(u.a,{style:{textAlign:"left",marginBottom:25}},s.createElement(u.a.Item,null,"APP\u4e0a\u4f20"),s.createElement(u.a.Item,null,s.createElement("a",{href:""},"\u5b89\u5353"))),s.createElement("div",{style:{marginBottom:16,textAlign:"left"}},s.createElement(f.a,{type:"primary",onClick:this.showDrawer.bind(this),style:{marginRight:20}},"\u6dfb\u52a0"),s.createElement(f.a,{type:"danger",disabled:!T,onClick:function(){e.deleteAppVersion()}},"\u5220\u9664"),s.createElement("span",{style:{marginLeft:8}},T?"\u9009\u62e9\u4e86".concat(i.length,"\u9879"):"")),s.createElement("div",null,s.createElement(h.a,{rowSelection:A,columns:N,dataSource:l,pagination:{pageSize:10},onChange:this.handleChange,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}})),s.createElement("div",null,s.createElement(g.a,{width:600,title:"\u6dfb\u52a0APP\u7248\u672c",placement:"right",closable:!0,onClose:function(){e.setState({visible:!1})},visible:this.state.visible},s.createElement(b.a,{labelCol:{span:6},wrapperCol:{span:14}},s.createElement(b.a.Item,{label:"\u5e94\u7528\u540d",hasFeedback:!0},j("fileName",{initialValue:n,setFieldsValue:n,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d!"}]})(s.createElement(d.a,{placeholder:"\u4f8b\u5982\uff1a\u5ba0\u90fd",onChange:function(t){return e.setState({name:t.target.value})}}))),s.createElement(b.a.Item,{label:"\u624b\u673a\u7cfb\u7edf",hasFeedback:!0},j("deviceType",{initialValue:r,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7cfb\u7edf"}]})(s.createElement(c.a,{onSelect:function(t){return e.setState({initDeviceValue:t})}},s.createElement(E,{value:"1"},"\u5b89\u5353"),s.createElement(E,{value:"2"},"\u82f9\u679c")))),s.createElement(b.a.Item,{label:"appId",hasFeedback:!0},j("appId",{setFieldsValue:o,rules:[{required:!0,message:"\u8bf7\u8f93\u5165appId!"}]})(s.createElement(d.a,{placeholder:"\u4f8b\u5982\uff1aabc",onChange:function(t){return e.setState({appId:t.target.value})}}))),s.createElement(b.a.Item,{label:"\u5bf9\u5916\u7248\u672c",hasFeedback:!0},j("appVersion",{setFieldsValue:k,rules:[{required:!0,message:"\u5bf9\u5916\u7248\u672c!"}]})(s.createElement(d.a,{placeholder:"\u4f8b\u5982:2.0.0",onChange:function(t){return e.setState({appVersion:t.target.value})}}))),s.createElement(b.a.Item,{label:"\u7248\u672c\u4ee3\u7801",hasFeedback:!0},j("appCode",{setFieldsValue:p,initialValue:p,rules:[{required:!0,message:"\u7248\u672c\u4ee3\u7801!"}]})(s.createElement(I.a,{min:1,max:10,onChange:function(t){return e.setState({appCode:t})}}))),s.createElement(b.a.Item,{label:"\u7248\u672c\u66f4\u65b0\u5185\u5bb9"},j("description",{valuePropName:"checked",initialValue:x,setFieldsValue:x})(s.createElement(V,{rows:4,onChange:function(t){return e.setState({description:t.target.value})}}))),s.createElement(b.a.Item,{label:"\u662f\u5426\u5f3a\u5236\u66f4\u65b0"},j("forces",{valuePropName:"checked",initialValue:w,setFieldsValue:w})(s.createElement(v.a,{onChange:function(){return e.setState({forces:!w})}}))),s.createElement(C,F,s.createElement("p",{className:"ant-upload-drag-icon"},s.createElement(y.a,{type:"inbox"})),s.createElement("p",{className:"ant-upload-text"},"\u4e0a\u4f20apk"),s.createElement("p",{className:"ant-upload-hint"},"\u652f\u6301\u62d6\u62fd\u4e0a\u4f20"))),s.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},s.createElement(f.a,{onClick:function(){e.setState({visible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),s.createElement(f.a,{onClick:function(){e.props.form.validateFields(function(t){t||(e.setState({visible:!0}),e.submitAppVersionMsgs())})},type:"primary"},"\u786e\u5b9a")))))}}]),t}(s.Component),x=b.a.create({name:"validate_other"})(w);t.default=x}}]);
//# sourceMappingURL=14.2a81ae77.chunk.js.map