(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{481:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t){return 1===t?null:e.filter(function(e,t){return 1===e.level}).map(function(t,a){var n=e.filter(function(e,a){return t.id===e.pid}).map(function(e,t){return{value:e.id.toString(),label:e.name}});return{value:t.id.toString(),label:t.name,children:n}})}},493:function(e,t,a){var n=a(494);"string"===typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(55)(n,i);n.locals&&(e.exports=n.locals)},494:function(e,t,a){(e.exports=a(50)(!1)).push([e.i,"",""])},528:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return I});var n=a(165),i=a(27),l=a(28),r=a(30),o=a(29),s=a(31),c=a(0),d=a(121),u=a(472),m=a(476),f=a(37),p=a(471),v=a(475),h=a(540),g=a(465),b=a(9),y=a(95),S=a(481),E=(a(493),a(21)),w=a(126),k=a(39),T=a.n(k),x=d.a.Group,C=u.a.Dragger,I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={files:[],updateId:1,selectedRowKeys:[],selectedPetKeys:[],selectedPetTypeKeys:[],loading:!1,filteredInfo:null,sortedInfo:"",visible:!1,editVisible:!1,value:2,imageUrl:"",defaultServiceName:"",defalutSizeValue:6,editSizeVisible:!1,tableData:[],resTableData:[],resPetTypeTableData:[],showImage:!1,imageSrc:""},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleChange=function(e,t,n){console.log("Various parameters",e,t,n),a.setState({filteredInfo:t,sortedInfo:n})},a.handleDelete=function(e){console.log(e)},a.addServiceType=function(){a.showDrawer()},a.editServiceType=function(e){a.setState({editVisible:!0,defaultServiceName:e.name,updateId:e.key})},a.showDrawer=function(){a.setState({visible:!0})},a.deleteServiceType=function(){var e=a.state.selectedRowKeys;Object(E.a)({method:"post",url:"/service/delete",data:{ids:e}}).then(function(e){e?(m.a.success("\u5220\u9664\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u5220\u9664\u5931\u8d25")})},a.submitServiceType=function(){var e=a.state,t=e.defaultServiceName,n=e.selectedPetKeys,i=e.imageUrl,l=e.value,r=n[1]?a.state.selectedPetKeys[1]:-1;Object(E.a)({method:"post",url:"/service/add",data:{name:t,pid:r,img:i,level:l}}).then(function(e){e?(m.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u6dfb\u52a0\u5931\u8d25")})},a.editSubmitServiceType=function(){var e=a.state,t=e.defaultServiceName,n=e.imageUrl,i=e.updateId;Object(E.a)({method:"post",url:"/service/edit",data:{id:i,name:t,image:n}}).then(function(e){e?(m.a.success("\u4fee\u6539\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u4fee\u6539\u5931\u8d25")})},a.handleUpload=function(e){var t=e.fileList,n=e.file,i=n.name,l=localStorage.getItem("adminId"),r=(new Date).getTime().toString();if(l)for(;l.length<36;)l+="x";else alert("\u8bf7\u91cd\u65b0\u767b\u9646");var o="".concat(l).concat(r,"ao12");t.map(function(e,t){e.name===i&&(e.name=o)}),console.log(t,n);var s=localStorage.getItem("uploadToken");s&&Object(w.b)(n,o,s,"ao");var c=Object(w.a)(t);a.setState({files:t,imageUrl:c})},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(E.a)({method:"get",url:"/service/list"}).then(function(t){if(t&&t.length>0){var a=t.map(function(e,t){return{key:e.id,name:e.name,image:e.img?e.img:"",kinds:"".concat(e.level,"\u7ea7\u5206\u7c7b"),status:e.status?e.status:"----",creatTime:e.ct?T()(parseInt(e.ct,10)).format("YYYY-MM-DD H:mm:ss"):"----",modifiedTime:e.mt?T()(parseInt(e.mt,10)).format("YYYY-MM-DD H:mm:ss"):"----",operation:""}});e.setState({tableData:a,resTableData:t})}})}},{key:"beforeUpload",value:function(e){var t=this.state.files;return this.setState({files:[].concat(Object(n.a)(t),[e])}),!1}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.selectedRowKeys,i=a.editSizeVisible,l=a.defalutSizeValue,r=a.tableData,o=a.resTableData,s=a.files,u=this.state.filteredInfo,m=[{title:"\u670d\u52a1\u5206\u7c7b",dataIndex:"name",key:"name"},{title:"\u56fe\u7247",dataIndex:"image",key:"image",render:function(e,a){return""!==a.image?a.image.split(",").map(function(e,a){return c.createElement("a",{href:"javascript:void(0);",key:a,onClick:function(){t.setState({showImage:!0,imageSrc:e})}},"\u70b9\u51fb\u67e5\u770b")}):c.createElement("span",null,"\u6682\u65e0")}},{title:"\u670d\u52a1\u79cd\u7c7b",dataIndex:"kinds",key:"kinds",filters:[{text:"1\u7ea7\u5206\u7c7b",value:"1"},{text:"2\u7ea7\u5206\u7c7b",value:"2"}],filteredValue:(u=u||{}).kinds||null,onFilter:function(e,t){return t.kinds.toString().includes(e)}},{title:"\u72b6\u6001",dataIndex:"status",key:"status"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"creatTime",key:"creatTime"},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"modifiedTime",key:"modifiedTime"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,a){return console.log(a),c.createElement("a",{href:"javascript:;",onClick:t.editServiceType.bind(t,a)},"\u7f16\u8f91")}}],E={selectedRowKeys:n,onChange:this.onSelectChange},w=n.length>0,k=Object(S.a)(o,this.state.value);return c.createElement("div",null,c.createElement("div",{style:{marginBottom:16,textAlign:"left"}},c.createElement(f.a,{type:"primary",onClick:this.addServiceType.bind(this),style:{marginRight:20}},"\u6dfb\u52a0"),c.createElement(f.a,{type:"danger",disabled:!w,onClick:function(){t.deleteServiceType()}},"\u5220\u9664"),c.createElement("span",{style:{marginLeft:8}},w?"\u9009\u62e9\u4e86".concat(n.length,"\u9879"):"")),c.createElement("div",null,c.createElement(p.a,{rowSelection:E,columns:m,dataSource:r,pagination:{pageSize:10},onChange:this.handleChange,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}})),c.createElement("div",null,c.createElement(v.a,{width:500,title:"\u6dfb\u52a0\u670d\u52a1\u7c7b\u578b",placement:"right",closable:!0,onClose:function(){t.setState({visible:!1,files:[]})},visible:this.state.visible},c.createElement(x,{onChange:function(e){t.setState({value:e.target.value})},value:this.state.value},c.createElement(d.a,{value:1},"\u6839\u76ee\u5f55"),c.createElement(d.a,{value:2},"\u5ba0\u7269\u79cd\u7c7b")),c.createElement("div",{style:{margin:"20px 0"}},k?c.createElement("span",null,"\u5c42\u7ea7\uff1a"):"",k?c.createElement(h.a,{style:{width:"70%"},options:k,onChange:function(e){return t.setState({selectedPetKeys:e})},placeholder:"\u9009\u62e9\u4e0a\u4e00\u5c42\u7ea7"}):""),c.createElement("div",null,c.createElement("span",null,"\u5206\u7c7b\uff1a"),c.createElement(g.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(e){t.setState({defaultServiceName:e.target.value})}})),c.createElement("div",{className:"Box"},c.createElement("span",null,"\u56fe\u7247\uff1a"),c.createElement(C,{className:"Dragger",fileList:s,beforeUpload:this.beforeUpload.bind(this),onChange:this.handleUpload},c.createElement("p",{className:"ant-upload-drag-icon"},c.createElement(b.a,{type:"inbox"})),c.createElement("p",{className:"ant-upload-hint"},"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u81f3\u6b64\u5904"))),c.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},c.createElement(f.a,{onClick:function(){t.setState({visible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),c.createElement(f.a,{onClick:function(){t.setState({visible:!0}),t.submitServiceType()},type:"primary"},"\u786e\u5b9a")))),c.createElement("div",null,c.createElement(v.a,{width:500,title:"\u7f16\u8f91\u670d\u52a1\u7c7b\u578b",placement:"right",closable:!0,onClose:function(){t.setState({editVisible:!1,files:[]})},visible:this.state.editVisible},c.createElement("div",null,c.createElement("span",null,"\u5206\u7c7b\uff1a"),c.createElement(g.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(e){t.setState({defaultServiceName:e.target.value})},defaultValue:this.state.defaultServiceName,value:this.state.defaultServiceName})),c.createElement("div",{className:"Box"},c.createElement("span",null,"\u56fe\u7247\uff1a"),c.createElement(C,{className:"Dragger",fileList:s,beforeUpload:this.beforeUpload.bind(this),onChange:this.handleUpload},c.createElement("p",{className:"ant-upload-drag-icon"},c.createElement(b.a,{type:"inbox"})),c.createElement("p",{className:"ant-upload-hint"},"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u81f3\u6b64\u5904"))),i?c.createElement("div",null,c.createElement("span",null,"\u4f53\u578b\uff1a"),c.createElement(x,{onChange:function(e){t.setState({defalutSizeValue:e.target.value})},value:l},c.createElement(d.a,{value:6},"\u5927\u578b\u72ac"),c.createElement(d.a,{value:7},"\u4e2d\u578b\u72ac"),c.createElement(d.a,{value:8},"\u5c0f\u578b\u72ac"))):"",c.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},c.createElement(f.a,{onClick:function(){t.setState({editVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),c.createElement(f.a,{onClick:function(){t.editSubmitServiceType()},type:"primary"},"\u786e\u8ba4"))),c.createElement(y.a,{visible:this.state.showImage,onCancel:function(){return t.setState({showImage:!1})},footer:null,destroyOnClose:!0},(e=this.state.imageSrc,c.createElement("img",{src:e,alt:"",style:{width:"100%"}})))))}}]),t}(c.Component)}}]);
//# sourceMappingURL=12.91ae69a5.chunk.js.map