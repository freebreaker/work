(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{524:function(e,t,a){var n=a(525);"string"===typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(55)(n,i);n.locals&&(e.exports=n.locals)},525:function(e,t,a){(e.exports=a(50)(!1)).push([e.i,".Box {\n  margin: 20px 0;\n  vertical-align: inherit;\n  display: flex;\n  align-items: flex-start;\n}\n.Box .Dragger {\n  width: 70%;\n  display: inline-block;\n}\n",""])},538:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return V});var n=a(165),i=a(45),l=a(46),r=a(49),o=a(47),c=a(48),s=a(0),d=a(465),m=a(472),u=a(476),p=a(31),f=a(471),g=a(475),h=a(9),b=a(125),v=(a(524),a(21)),y=a(126),E=a(37),w=a.n(E),S=d.a.TextArea,x=m.a.Dragger,V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={files:[],updateId:1,selectedRowKeys:[],selectedPetKeys:[],loading:!1,filteredInfo:null,sortedInfo:"",visible:!1,editVisible:!1,value:3,imageUrl:"",defaultVaccineBrandName:"",defalutSizeValue:6,editSizeVisible:!1,tableData:[],resTableData:[],showImage:!1,imageSrc:"",description:""},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleChange=function(e,t,n){console.log("Various parameters",e,t,n),a.setState({filteredInfo:t,sortedInfo:n})},a.handleDelete=function(e){console.log(e)},a.addVaccineBrand=function(){a.showDrawer()},a.editVaccineBrand=function(e){console.log("----"===e.size,e),a.setState({editVisible:!0,editSizeVisible:"----"!==e.size,defaultVaccineBrandName:e.name,updateId:e.key,description:e.description})},a.showDrawer=function(){a.setState({visible:!0})},a.deleteVaccineBrand=function(){var e=a.state.selectedRowKeys;Object(v.a)({method:"post",url:"/repellant/delete",data:{ids:e}}).then(function(e){e?(u.a.success("\u5220\u9664\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):u.a.error("\u5220\u9664\u5931\u8d25")})},a.submitVaccineBrand=function(){var e=a.state,t=e.defaultVaccineBrandName,n=e.imageUrl,i=e.description;Object(v.a)({method:"post",url:"/repellant/add",data:{name:t,image:n,description:i}}).then(function(e){e?(u.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):u.a.error("\u6dfb\u52a0\u5931\u8d25")})},a.editSubmitVaccineBrand=function(){var e=a.state,t=e.defaultVaccineBrandName,n=e.imageUrl,i=e.updateId,l=e.description;Object(v.a)({method:"post",url:"/repellant/edit",data:{id:i,name:t,description:l,image:n}}).then(function(e){e?(u.a.success("\u4fee\u6539\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):u.a.error("\u4fee\u6539\u5931\u8d25")})},a.handleUpload=function(e){var t=e.fileList,n=e.file,i=n.name,l=localStorage.getItem("adminId"),r=(new Date).getTime().toString();if(l)for(;l.length<36;)l+="x";else alert("\u8bf7\u91cd\u65b0\u767b\u9646");var o="".concat(l).concat(r,"ao12");t.map(function(e,t){e.name===i&&(e.name=o)}),console.log(t,n);var c=localStorage.getItem("uploadToken");c&&Object(y.b)(n,o,c,"ao");var s=Object(y.a)(t);a.setState({files:t,imageUrl:s})},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(v.a)({method:"get",url:"/repellant/list"}).then(function(t){if(t.length>0){var a=t.map(function(e,t){return{key:e.id,name:e.name,image:e.image?e.image:"\u6682\u65e0",description:e.description?e.description:"----",creatTime:e.ct?w()(parseInt(e.ct,10)).format("YYYY-MM-DD H:mm:ss"):"----",modifiedTime:e.mt?w()(parseInt(e.mt,10)).format("YYYY-MM-DD H:mm:ss"):"----",operation:""}});e.setState({tableData:a,resTableData:t}),console.log(t)}})}},{key:"beforeUpload",value:function(e){var t=this.state.files;return this.setState({files:[].concat(Object(n.a)(t),[e])}),!1}},{key:"render",value:function(){var e=this,t=this,a=this.state,n=a.selectedRowKeys,i=a.tableData,l=a.description,r=this.state.filteredInfo;r=r||{};var o,c=[{title:"\u9a71\u866b\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u56fe\u7247",dataIndex:"image",key:"image",render:function(e,a){return""!==a.image?a.image.split(",").map(function(e,a){return s.createElement("a",{href:"javascript:void(0);",key:a,onClick:function(){t.setState({showImage:!0,imageSrc:e})}},"\u70b9\u51fb\u67e5\u770b")}):s.createElement("span",null,"\u6682\u65e0")}},{title:"\u9a71\u866b\u63cf\u8ff0",dataIndex:"description",key:"description"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"creatTime",key:"creatTime"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,a){return s.createElement("a",{href:"javascript:;",onClick:e.editVaccineBrand.bind(e,a)},"\u7f16\u8f91")}}],m={selectedRowKeys:n,onChange:this.onSelectChange},u=n.length>0;return s.createElement("div",null,s.createElement("div",{style:{marginBottom:16,textAlign:"left"}},s.createElement(p.a,{type:"primary",onClick:this.addVaccineBrand.bind(this),style:{marginRight:20}},"\u6dfb\u52a0"),s.createElement(p.a,{type:"danger",disabled:!u,onClick:function(){e.deleteVaccineBrand()}},"\u5220\u9664"),s.createElement("span",{style:{marginLeft:8}},u?"\u9009\u62e9\u4e86".concat(n.length,"\u9879"):"")),s.createElement("div",null,s.createElement(f.a,{rowSelection:m,columns:c,dataSource:i,pagination:{pageSize:10},onChange:this.handleChange,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}})),s.createElement("div",null,s.createElement(g.a,{width:500,title:"\u6dfb\u52a0\u9a71\u866b\u7c7b\u578b",placement:"right",closable:!0,onClose:function(){e.setState({visible:!1,defaultVaccineBrandName:"",description:"",imageSrc:"",updateId:""})},visible:this.state.visible},s.createElement("div",{style:{margin:"20px 0"}},s.createElement("span",null,"\u9a71\u866b\u540d\u79f0\uff1a"),s.createElement(d.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u9a71\u866b\u540d",onChange:function(t){e.setState({defaultVaccineBrandName:t.target.value})}})),s.createElement("div",{style:{margin:"20px 0",display:"flex"}},s.createElement("span",null,"\u9a71\u866b\u63cf\u8ff0\uff1a"),s.createElement(S,{style:{width:"70%",height:120},placeholder:"\u8bf7\u8f93\u5165\u9a71\u866b\u63cf\u8ff0",onChange:function(t){e.setState({description:t.target.value})}})),s.createElement("div",{className:"Box"},s.createElement("span",null,"\u9a71\u866b\u56fe\u7247\uff1a"),s.createElement(x,{className:"Dragger",onChange:this.handleUpload,beforeUpload:this.beforeUpload.bind(this)},s.createElement("p",{className:"ant-upload-drag-icon"},s.createElement(h.a,{type:"inbox"})),s.createElement("p",{className:"ant-upload-hint"},"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u81f3\u6b64\u5904"))),s.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},s.createElement(p.a,{onClick:function(){e.setState({visible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),s.createElement(p.a,{onClick:function(){e.setState({visible:!0}),e.submitVaccineBrand()},type:"primary"},"\u786e\u5b9a")))),s.createElement("div",null,s.createElement(g.a,{width:500,title:"\u7f16\u8f91\u9a71\u866b\u7c7b\u578b",placement:"right",closable:!0,onClose:function(){e.setState({visible:!1,defaultVaccineBrandName:"",description:"",imageSrc:"",updateId:""})},visible:this.state.editVisible},s.createElement("div",null,s.createElement("span",null,"\u9a71\u866b\u5206\u7c7b\uff1a"),s.createElement(d.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(t){e.setState({defaultVaccineBrandName:t.target.value})},defaultValue:this.state.defaultVaccineBrandName,value:this.state.defaultVaccineBrandName})),s.createElement("div",{style:{margin:"20px 0",display:"flex"}},s.createElement("span",null,"\u9a71\u866b\u63cf\u8ff0\uff1a"),s.createElement(S,{defaultValue:l,style:{width:"70%",height:120},placeholder:"\u8bf7\u8f93\u5165\u9a71\u866b\u63cf\u8ff0",onChange:function(t){e.setState({description:t.target.value})}})),s.createElement("div",{className:"Box"},s.createElement("span",null,"\u9a71\u866b\u56fe\u7247\uff1a"),s.createElement(x,{className:"Dragger",onChange:this.handleUpload,beforeUpload:this.beforeUpload.bind(this)},s.createElement("p",{className:"ant-upload-drag-icon"},s.createElement(h.a,{type:"inbox"})),s.createElement("p",{className:"ant-upload-hint"},"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u81f3\u6b64\u5904"))),s.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},s.createElement(p.a,{onClick:function(){e.setState({editVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),s.createElement(p.a,{onClick:function(){e.editSubmitVaccineBrand()},type:"primary"},"\u786e\u8ba4"))),s.createElement(b.a,{visible:this.state.showImage,onCancel:function(){return e.setState({showImage:!1})},footer:null,destroyOnClose:!0},(o=this.state.imageSrc,s.createElement("img",{src:o,alt:"",style:{width:"100%"}})))))}}]),t}(s.Component)}}]);
//# sourceMappingURL=17.ab4b5dfc.chunk.js.map