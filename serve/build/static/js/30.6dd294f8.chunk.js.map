{"version":3,"sources":["webpack:///./src/pages/appUpload/index.less?f9cf","pages/appUpload/index.less","pages/appUpload/index.tsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","Option","Select","Dragger","Upload","TextArea","Input","AppUploadWrap","state","updateId","selectedRowKeys","loading","filteredInfo","sortedInfo","visible","editVisible","value","editSizeVisible","tableData","resTableData","initDeviceValue","name","fileName","appId","appCode","appVersion","appUrl","description","forces","cuserId","muserId","createTime","modifiedTime","onSelectChange","_this","setState","handleChange","pagination","filters","sorter","console","log","handleDelete","key","editAppMsgs","record","size","defaultPetName","showDrawer","deleteAppVersion","axios","method","url","data","ids","then","res","message","success","setTimeout","window","location","reload","error","submitAppVersionMsgs","_this$state","deviceType","parseInt","toString","downloadApk","concat","responseType","objUrl","URL","createObjectURL","a","document","createElement","body","appendChild","href","download","click","revokeObjectURL","That","this","length","map","item","index","id","type","creater","laster","operation","_this2","_this$state2","columns","title","dataIndex","render","text","react__WEBPACK_IMPORTED_MODULE_5__","onClick","bind","target","rowSelection","onChange","hasSelected","token","localStorage","getItem","getFieldDecorator","props","form","multiple","action","withCredentials","headers","Authorization","info","status","file","fileList","response","filePath","antd__WEBPACK_IMPORTED_MODULE_10__","style","textAlign","marginBottom","Item","antd__WEBPACK_IMPORTED_MODULE_11__","marginRight","disabled","marginLeft","antd__WEBPACK_IMPORTED_MODULE_12__","dataSource","pageSize","locale","filterConfirm","filterReset","emptyText","antd__WEBPACK_IMPORTED_MODULE_13__","width","placement","closable","onClose","antd__WEBPACK_IMPORTED_MODULE_14__","labelCol","span","wrapperCol","label","hasFeedback","initialValue","setFieldsValue","rules","required","antd__WEBPACK_IMPORTED_MODULE_8__","placeholder","e","antd__WEBPACK_IMPORTED_MODULE_6__","onSelect","antd__WEBPACK_IMPORTED_MODULE_15__","min","max","valuePropName","rows","antd__WEBPACK_IMPORTED_MODULE_16__","className","antd__WEBPACK_IMPORTED_MODULE_17__","position","left","bottom","borderTop","padding","background","validateFields","err","React","AppUpload","Form","create"],"mappings":"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","file":"static/js/30.6dd294f8.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n\n","import * as React from 'react';\r\nimport {\r\n    Table, Button, Drawer, Form, Input, message, Breadcrumb, Select, Switch, InputNumber, Upload, Icon\r\n} from 'antd';\r\nimport './index.less';\r\nimport axios from '../../util/Axios';\r\n\r\n// const RadioGroup = Radio.Group;\r\n// const Dragger = Upload.Dragger;\r\nconst { Option } = Select;\r\n\r\nconst Dragger = Upload.Dragger;\r\n\r\nconst { TextArea } = Input;\r\n\r\nclass AppUploadWrap extends React.Component<any, any> {\r\n\r\n    public state = {\r\n        updateId: 1, // edit id 要更新的id\r\n        selectedRowKeys: [], // Check here to configure the default column\r\n        loading: false,\r\n        filteredInfo: null,\r\n        sortedInfo: \"\",\r\n        visible: false,\r\n        editVisible: false,\r\n        value: 2,  // 默认选择的一级分类\r\n        editSizeVisible: false,\r\n        tableData: [],\r\n        resTableData: [],\r\n        initDeviceValue: \"1\",// 默认设备类型 1 安卓  2 苹果\r\n        name: \"宠都\", // 应用名\r\n        fileName: \"\", // 文件名\r\n        appId: \"\", // appId \r\n        appCode: 5, // app 代码 gitee链接\r\n        appVersion: \"\",\r\n        appUrl: \"\",\r\n        description: \"\",\r\n        forces: false,\r\n        cuserId: \"\",\r\n        muserId: \"\",\r\n        createTime: \"\",\r\n        modifiedTime: \"\",\r\n    };\r\n\r\n    public componentDidMount() {\r\n        const That = this\r\n\r\n        axios({\r\n            method: \"get\",\r\n            url: \"/app/versions\"\r\n        }).then((res: any) => {\r\n            if (res.length > 0) {\r\n                const tableData = res.map((item: any, index: number) => {\r\n                    return {\r\n                        key: item.id,  // key 应带对应data id \r\n                        name: \"宠都APP\",\r\n                        type: item.deviceType === 1 ? \"安卓\" : \"苹果\",\r\n                        fileName: item.fileName ? item.fileName : \"----\",\r\n                        appId: item.appId ? item.appId : \"----\",\r\n                        appCode: item.appCode ? item.appCode : \"----\",\r\n                        appVersion: item.appVersion ? item.appVersion : \"----\",\r\n                        appUrl: item.url ? item.url : \"----\",\r\n                        description: item.description ? item.description : \"----\",\r\n                        forces: item.forces ? \"是\" : \"否\",\r\n                        creater: item.cuserId ? item.cuserId : \"----\",\r\n                        laster: item.muserId ? item.muserId : \"----\",\r\n                        operation: \"\"\r\n                    }\r\n                })\r\n                That.setState({\r\n                    \"tableData\": tableData,\r\n                    // resTableData: res.data\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    public onSelectChange = (selectedRowKeys: any) => {\r\n        this.setState({ selectedRowKeys });\r\n    }\r\n\r\n    public handleChange = (pagination: any, filters: any, sorter: any) => {\r\n        console.log('Various parameters', pagination, filters, sorter);\r\n        this.setState({\r\n            filteredInfo: filters,\r\n            sortedInfo: sorter,\r\n        });\r\n    }\r\n\r\n    public handleDelete = (key: any) => {\r\n        console.log(key)\r\n    }\r\n\r\n    public editAppMsgs = (record: any) => {\r\n        console.log(record.size === \"----\", record)\r\n        this.setState({\r\n            editVisible: true,\r\n            editSizeVisible: record.size !== \"----\",\r\n            defaultPetName: record.name,\r\n            updateId: record.key\r\n        })\r\n    }\r\n\r\n    public showDrawer = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    public deleteAppVersion = () => {\r\n\r\n        const selectedRowKeys = this.state.selectedRowKeys\r\n\r\n        console.log(selectedRowKeys)\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/app/delete\",\r\n            data: {\r\n                ids: selectedRowKeys\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"删除成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"删除失败\")\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    public submitAppVersionMsgs = () => {\r\n\r\n        message.success('校验成功');\r\n\r\n        const { name, fileName, initDeviceValue, appId, appCode, appVersion, appUrl, description, forces } = this.state\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/app/upload\",\r\n            data: {\r\n                \"name\": name,\r\n                \"fileName\": fileName,\r\n                \"deviceType\": parseInt(initDeviceValue, 10),\r\n                \"appId\": appId,\r\n                \"appCode\": appCode.toString(),\r\n                \"appVersion\": appVersion,\r\n                \"appUrl\": appUrl,\r\n                \"description\": description,\r\n                \"forces\": forces ? 1 : 0,\r\n                \"cuserId\": \"cuserId\",\r\n                \"muserId\": \"muserId\",\r\n            },\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"添加成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 1000);\r\n            } else {\r\n                message.error(\"添加失败\")\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    public downloadApk = (record: any) => {\r\n\r\n        const { appUrl } = record\r\n\r\n        if (appUrl) {\r\n            axios({\r\n                method: \"get\",\r\n                url: `/app/download?name=${record.fileName}`,\r\n                responseType: \"blob\",\r\n            }).then((res: any) => {\r\n                const objUrl = URL.createObjectURL(res)\r\n                const a = document.createElement(\"a\");\r\n                document.body.appendChild(a);\r\n                a.href = objUrl;\r\n                a.download = `${record.fileName}.apk`\r\n                a.click();\r\n                window.URL.revokeObjectURL(objUrl);\r\n                // window.location.href = objUrl\r\n\r\n            })\r\n        } else {\r\n\r\n            message.error(\"没有此下载路径\")\r\n\r\n        }\r\n    }\r\n\r\n    public render() {\r\n\r\n        const That = this\r\n\r\n        const { name, selectedRowKeys, tableData, initDeviceValue, appId, appCode, appVersion, forces ,description } = this.state;\r\n\r\n        let { filteredInfo }: any = this.state;\r\n\r\n        filteredInfo = filteredInfo || {};\r\n\r\n        const columns = [{\r\n            title: '应用名',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        }, {\r\n            title: '设备类型',\r\n            dataIndex: 'type',\r\n            key: 'type',\r\n        }, {\r\n            title: '文件名',\r\n            dataIndex: 'fileName',\r\n            key: 'fileName',\r\n        }, {\r\n            title: 'app标识',\r\n            dataIndex: 'appId',\r\n            key: 'appId',\r\n        }, {\r\n            title: '应用版本代码',\r\n            dataIndex: 'appCode',\r\n            key: 'appCode',\r\n        }, {\r\n            title: '对外版本',\r\n            dataIndex: 'appVersion',\r\n            key: 'appVersion',\r\n        }, {\r\n            title: '升级链接',\r\n            dataIndex: 'appUrl',\r\n            key: 'appUrl',\r\n            render: (text: any, record: any) => {\r\n                return (\r\n                    <a href=\"javascript:;\" onClick={this.downloadApk.bind(this, record)}\r\n                        target=\"_blank\"\r\n                    >点此下载</a>\r\n                    // <a href={`http://localhost:4000/app/download/name=${record.fileName}`} target=\"_blank\">点此下载</a>\r\n                )\r\n            }\r\n        }, {\r\n            title: '描述',\r\n            dataIndex: 'description',\r\n            key: 'description',\r\n        }, {\r\n            title: '是否强制更新',\r\n            dataIndex: 'forces',\r\n            key: 'forces',\r\n        }, {\r\n            title: '创建者',\r\n            dataIndex: 'creater',\r\n            key: 'creater',\r\n        }, {\r\n            title: '最后修改者',\r\n            dataIndex: 'laster',\r\n            key: 'laster',\r\n        }, {\r\n            title: '创建时间',\r\n            dataIndex: 'creatTime',\r\n            key: 'creatTime',\r\n        }, {\r\n            title: '最后修改时间',\r\n            dataIndex: 'modifiedTime',\r\n            key: 'modifiedTime',\r\n        }, {\r\n            title: '操作',\r\n            dataIndex: 'operation',\r\n            key: 'operation',\r\n            render: (text: any, record: any) => {\r\n                return (\r\n                    <a href=\"javascript:;\" onClick={this.editAppMsgs.bind(this, record)}>编辑</a>\r\n\r\n                )\r\n            }\r\n        }];\r\n\r\n        const rowSelection = {\r\n            selectedRowKeys,\r\n            onChange: this.onSelectChange\r\n        };\r\n\r\n        const hasSelected = selectedRowKeys.length > 0;\r\n\r\n\r\n        const token = localStorage.getItem(\"token\")\r\n\r\n        const { getFieldDecorator } = this.props.form;\r\n\r\n        const formItemLayout = {\r\n            labelCol: { span: 6 },\r\n            wrapperCol: { span: 14 },\r\n        };\r\n        const props = {\r\n            name: 'file',\r\n            multiple: true,\r\n            action: '/app/apk',\r\n            data: {\r\n                \"appVersion\": appVersion\r\n            },\r\n            withCredentials: true,\r\n            headers: {\r\n                Authorization: token ? token : \"\"\r\n            },\r\n            onChange(info: any) {\r\n                const status = info.file.status;\r\n                if (status !== 'uploading') {\r\n                    // console.log(info.file, info.fileList);\r\n                    if(info.fileList.length === 0){\r\n                        That.setState({\r\n                            appUrl: \"\",\r\n                            fileName: \"\"\r\n                        })\r\n                    }\r\n                }\r\n                if (status === 'done') {\r\n                    message.success(`${info.file.name} 上传成功`);\r\n                    That.setState({\r\n                        appUrl: info.file.response.filePath,\r\n                        fileName: info.file.response.fileName\r\n                    })\r\n                } else if (status === 'error') {\r\n                    message.error(`${info.file.name} 上传失败`);\r\n                }\r\n            },\r\n        };\r\n        return (\r\n            <div>\r\n                <Breadcrumb style={{ textAlign: \"left\", marginBottom: 25 }}>\r\n                    <Breadcrumb.Item>APP上传</Breadcrumb.Item>\r\n                    <Breadcrumb.Item>\r\n                        <a href=\"\">安卓</a>\r\n                    </Breadcrumb.Item>\r\n                </Breadcrumb>\r\n                <div style={{ marginBottom: 16, textAlign: \"left\" }}>\r\n                    <Button type=\"primary\" onClick={this.showDrawer.bind(this)} style={{ marginRight: 20 }}>\r\n                        添加\r\n                    </Button>\r\n                    <Button type=\"danger\" disabled={!hasSelected} onClick={() => {\r\n                        this.deleteAppVersion()\r\n                    }}>\r\n                        删除\r\n                    </Button>\r\n\r\n                    <span style={{ marginLeft: 8 }}>\r\n                        {hasSelected ? `选择了${selectedRowKeys.length}项` : ''}\r\n                    </span>\r\n                </div>\r\n                <div>\r\n                    <Table rowSelection={rowSelection} columns={columns} dataSource={tableData}\r\n                        pagination={{ pageSize: 10 }}\r\n                        onChange={this.handleChange}\r\n                        locale={{ filterConfirm: \"确定\", filterReset: \"重置\", emptyText: \"暂无数据\" }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <Drawer\r\n                        width={600}\r\n                        title=\"添加APP版本\"\r\n                        placement=\"right\"\r\n                        closable={true}\r\n                        onClose={() => { this.setState({ visible: false }) }}\r\n                        visible={this.state.visible}\r\n                    >\r\n                        <Form {...formItemLayout}>\r\n                            <Form.Item label=\"应用名\" hasFeedback={true}>\r\n                                {getFieldDecorator('fileName', {\r\n                                    initialValue: name,\r\n                                    setFieldsValue: name,\r\n                                    rules: [{ required: true, message: '请输入应用名!' }],\r\n                                })(\r\n                                    <Input placeholder=\"例如：宠都\" onChange={(e: any) => this.setState({ name: e.target.value })} />\r\n                                )}\r\n                            </Form.Item>\r\n\r\n                            <Form.Item label=\"手机系统\" hasFeedback={true}>\r\n                                {getFieldDecorator('deviceType', {\r\n                                    initialValue: initDeviceValue,\r\n                                    rules: [\r\n                                        { required: true, message: '请选择系统' },\r\n                                    ],\r\n                                })(\r\n                                    <Select onSelect={(value: any) => this.setState({ initDeviceValue: value })}>\r\n                                        <Option value=\"1\">安卓</Option>\r\n                                        <Option value=\"2\">苹果</Option>\r\n                                    </Select>,\r\n                                )}\r\n                            </Form.Item>\r\n\r\n                            <Form.Item label=\"appId\" hasFeedback={true}>\r\n                                {getFieldDecorator('appId', {\r\n                                    setFieldsValue: appId,\r\n                                    rules: [{ required: true, message: '请输入appId!' }],\r\n                                })(\r\n                                    <Input placeholder=\"例如：abc\" onChange={(e: any) => this.setState({ appId: e.target.value })} />\r\n                                )}\r\n                            </Form.Item>\r\n\r\n                            <Form.Item label=\"对外版本\" hasFeedback={true}>\r\n                                {getFieldDecorator('appVersion', {\r\n                                    setFieldsValue: appVersion,\r\n                                    rules: [{ required: true, message: '对外版本!' }],\r\n                                })(\r\n                                    <Input placeholder=\"例如:2.0.0\"\r\n                                        onChange={(e: any) => this.setState({ appVersion: e.target.value })} />\r\n                                )}\r\n                            </Form.Item>\r\n\r\n                            <Form.Item label=\"版本代码\" hasFeedback={true}>\r\n                                {getFieldDecorator('appCode', {\r\n                                    setFieldsValue: appCode,\r\n                                    initialValue: appCode,\r\n                                    rules: [{ required: true, message: '版本代码!' }],\r\n                                })(\r\n                                    <InputNumber min={1} max={10} onChange={(value: any) => this.setState({ appCode: value })} />\r\n                                )}\r\n                            </Form.Item>\r\n\r\n                            {/* <Form.Item label=\"升级链接\" hasFeedback={true}>\r\n                                {getFieldDecorator('appUrl', {\r\n                                    setFieldsValue: appUrl,\r\n                                    initialValue: appUrl,\r\n                                    rules: [{ required: true, message: '升级链接!' }],\r\n                                })(\r\n                                    <Input placeholder=\"例如:sssss\" onChange={(e: any) => this.setState({ appUrl: e.target.value })} />\r\n                                )}\r\n                            </Form.Item> */}\r\n                            <Form.Item label=\"版本更新内容\">\r\n                                {getFieldDecorator('description',\r\n                                    {\r\n                                        valuePropName: 'checked',\r\n                                        initialValue: description,\r\n                                        setFieldsValue: description\r\n                                    })(\r\n                                        <TextArea rows={4} \r\n                                        onChange={(e:any)=>this.setState({\r\n                                            description:e.target.value\r\n                                        })}/>\r\n                                    )}\r\n                            </Form.Item>         \r\n                            <Form.Item label=\"是否强制更新\">\r\n                                {getFieldDecorator('forces',\r\n                                    {\r\n                                        valuePropName: 'checked',\r\n                                        initialValue: forces,\r\n                                        setFieldsValue: forces\r\n                                    })(\r\n                                        <Switch onChange={() => this.setState({ forces: !forces })} />\r\n                                    )}\r\n                            </Form.Item>\r\n                            <Dragger {...props}>\r\n                                <p className=\"ant-upload-drag-icon\">\r\n                                    <Icon type=\"inbox\" />\r\n                                </p>\r\n                                <p className=\"ant-upload-text\">上传apk</p>\r\n                                <p className=\"ant-upload-hint\">\r\n                                    支持拖拽上传\r\n                                </p>\r\n                            </Dragger>\r\n\r\n                        </Form>\r\n                        <div\r\n                            style={{\r\n                                position: 'absolute',\r\n                                left: 0,\r\n                                bottom: 0,\r\n                                width: '100%',\r\n                                borderTop: '1px solid #e9e9e9',\r\n                                padding: '10px 16px',\r\n                                background: '#fff',\r\n                                textAlign: 'right',\r\n                            }}\r\n                        >\r\n                            <Button onClick={() => { this.setState({ visible: false }) }} style={{ marginRight: 8 }}>\r\n                                取消\r\n                            </Button>\r\n                            <Button onClick={() => {\r\n                                this.props.form.validateFields((err: any) => {\r\n                                    if (!err) {\r\n                                        this.setState({ visible: true })\r\n                                        this.submitAppVersionMsgs()\r\n                                    }\r\n                                });\r\n                            }}\r\n                                type=\"primary\">\r\n                                确定\r\n                            </Button>\r\n                        </div>\r\n                    </Drawer>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst AppUpload = Form.create({ name: 'validate_other' })(AppUploadWrap);\r\n\r\nexport default AppUpload"],"sourceRoot":""}