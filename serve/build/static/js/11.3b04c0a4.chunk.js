(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{481:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t){return 1===t?null:e.filter(function(e,t){return 1===e.level}).map(function(t,a){var n=e.filter(function(e,a){return t.id===e.pid}).map(function(e,t){return{value:e.id.toString(),label:e.name}});return{value:t.id.toString(),label:t.name,children:n}})}},490:function(e,t,a){var n=a(491);"string"===typeof n&&(n=[[e.i,n,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};a(55)(n,l);n.locals&&(e.exports=n.locals)},491:function(e,t,a){(e.exports=a(50)(!1)).push([e.i,".Box {\n  margin: 20px 0;\n  vertical-align: inherit;\n  display: flex;\n  align-items: flex-start;\n}\n.Box .Dragger {\n  width: 70%;\n  display: inline-block;\n}\n",""])},526:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return I});var n=a(165),l=a(27),i=a(28),r=a(31),o=a(29),s=a(30),c=a(0),d=a(121),u=a(472),m=a(476),p=a(37),f=a(471),g=a(475),h=a(541),v=a(465),b=a(9),y=a(95),E=a(481),S=(a(490),a(21)),w=a(126),x=a(39),k=a.n(x),T=d.a.Group,C=u.a.Dragger,I=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={files:[],updateId:1,selectedRowKeys:[],selectedPetKeys:[],loading:!1,filteredInfo:null,sortedInfo:"",visible:!1,editVisible:!1,value:3,imageUrl:"",defaultPetName:"",defalutSizeValue:-1,editSizeVisible:!1,tableData:[],resTableData:[],showImage:!1,imageSrc:"",page:1},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleChange=function(e,t,n){console.log("Various parameters",e,t,n),a.props.history.push("/home/petDivide/".concat(e.current)),a.setState({filteredInfo:t,sortedInfo:n,page:e.current})},a.handleDelete=function(e){console.log(e)},a.addPetType=function(){a.showDrawer()},a.editPetType=function(e){console.log("----"===e.size,e),a.setState({editVisible:!0,editSizeVisible:"----"!==e.size,defalutSizeValue:e.pid,defaultPetName:e.name,updateId:e.key})},a.showDrawer=function(){a.setState({visible:!0})},a.deletePetType=function(){var e=a.state.selectedRowKeys;Object(S.a)({method:"post",url:"/petType/delete",data:{ids:e}}).then(function(e){e?(m.a.success("\u5220\u9664\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u5220\u9664\u5931\u8d25")})},a.submitPetType=function(){var e=a.state,t=e.defaultPetName,n=e.selectedPetKeys,l=e.imageUrl,i=e.value,r=n.map(Number);console.log(r);var o=r[0]?r[0]:-1,s=r[1]?r[1]:-1;Object(S.a)({method:"post",url:"/petType/add",data:{name:t,ppid:o,pid:s,image:l,level:i}}).then(function(e){e?(m.a.success("\u6dfb\u52a0\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u6dfb\u52a0\u5931\u8d25")})},a.editSubmitPetType=function(){var e=a.state,t=e.defaultPetName,n=e.defalutSizeValue,l=e.imageUrl,i=e.updateId;Object(S.a)({method:"post",url:"/petType/edit",data:{id:i,name:t,pid:n,image:l}}).then(function(e){e?(m.a.success("\u4fee\u6539\u6210\u529f"),setTimeout(function(){window.location.reload()},500)):m.a.error("\u4fee\u6539\u5931\u8d25")})},a.handleUpload=function(e){var t=e.fileList,n=e.file,l=n.name,i=localStorage.getItem("adminId"),r=(new Date).getTime().toString();if(i)for(;i.length<36;)i+="x";else alert("\u8bf7\u91cd\u65b0\u767b\u9646");var o="".concat(i).concat(r,"ao12");t.map(function(e,t){e.name===l&&(e.name=o)}),console.log(t,n);var s=localStorage.getItem("uploadToken");s&&Object(w.b)(n,o,s,"ao");var c=Object(w.a)(t);a.setState({files:t,imageUrl:c})},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.page,t=this;Object(S.a)({method:"get",url:"/petType/list"}).then(function(a){if(a&&a.length>0){var n=a.map(function(e,t){return{key:e.id,name:e.name,image:e.image?e.image:"",kinds:"".concat(e.level,"\u7ea7\u5206\u7c7b"),size:3===e.level?a.filter(function(t){return t.id===e.pid})[0].name:"----",pid:e.pid,status:"",creatTime:e.ct?k()(parseInt(e.ct,10)).format("YYYY-MM-DD H:mm:ss"):"----",operation:""}});t.setState({tableData:n,resTableData:a,page:parseInt(e,10)})}})}},{key:"beforeUpload",value:function(e){var t=this.state.files;return this.setState({files:[].concat(Object(n.a)(t),[e])}),!1}},{key:"render",value:function(){var e=this,t=this,a=this.state,n=a.selectedRowKeys,l=a.editSizeVisible,i=a.defalutSizeValue,r=a.tableData,o=a.resTableData,s=a.page;console.log(s);var u,m=this.state.filteredInfo,S=[{title:"\u5206\u7c7b\u540d",dataIndex:"name",key:"name"},{title:"\u56fe\u7247",dataIndex:"image",key:"image",render:function(e,a){return""!==a.image?a.image.split(",").map(function(e,a){return c.createElement("a",{href:"javascript:void(0);",key:a,onClick:function(){t.setState({imageSrc:e,showImage:!0})}},"\u70b9\u51fb\u67e5\u770b")}):c.createElement("span",null,"\u6682\u65e0")}},{title:"\u5ba0\u7269\u79cd\u7c7b",dataIndex:"kinds",key:"kinds",filters:[{text:"1\u7ea7\u5206\u7c7b",value:"1"},{text:"2\u7ea7\u5206\u7c7b",value:"2"},{text:"3\u7ea7\u5206\u7c7b",value:"3"}],filteredValue:(m=m||{}).kinds||null,onFilter:function(e,t){return t.kinds.toString().includes(e)}},{title:"\u4f53\u683c\u5927\u5c0f",dataIndex:"size",key:"size"},{title:"\u72b6\u6001",dataIndex:"status",key:"status"},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"creatTime",key:"creatTime"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,a){return c.createElement("a",{href:"javascript:;",onClick:e.editPetType.bind(e,a)},"\u7f16\u8f91")}}],w={selectedRowKeys:n,onChange:this.onSelectChange},x=n.length>0,k=Object(E.a)(o,this.state.value);return c.createElement("div",null,c.createElement("div",{style:{marginBottom:16,textAlign:"left"}},c.createElement(p.a,{type:"primary",onClick:this.addPetType.bind(this),style:{marginRight:20}},"\u6dfb\u52a0"),c.createElement(p.a,{type:"danger",disabled:!x,onClick:function(){e.deletePetType()}},"\u5220\u9664"),c.createElement("span",{style:{marginLeft:8}},x?"\u9009\u62e9\u4e86".concat(n.length,"\u9879"):"")),c.createElement("div",null,c.createElement(f.a,{rowSelection:w,columns:S,dataSource:r,pagination:{current:s,pageSize:10},onChange:this.handleChange,locale:{filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",emptyText:"\u6682\u65e0\u6570\u636e"}})),c.createElement("div",null,c.createElement(g.a,{width:500,title:"\u6dfb\u52a0\u5ba0\u7269\u7c7b\u578b",placement:"right",closable:!0,onClose:function(){e.setState({visible:!1})},visible:this.state.visible},c.createElement(T,{onChange:function(t){e.setState({value:t.target.value})},value:this.state.value},c.createElement(d.a,{value:1},"\u6839\u76ee\u5f55"),c.createElement(d.a,{value:3},"\u5ba0\u7269\u79cd\u7c7b")),c.createElement("div",{style:{margin:"20px 0"}},k?c.createElement("span",null,"\u5c42\u7ea7\uff1a"):"",k?c.createElement(h.a,{style:{width:"70%"},options:k,onChange:function(t){return e.setState({selectedPetKeys:t})},placeholder:"\u9009\u62e9\u4e0a\u4e00\u5c42\u7ea7"}):""),c.createElement("div",null,c.createElement("span",null,"\u5206\u7c7b\uff1a"),c.createElement(v.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(t){e.setState({defaultPetName:t.target.value})}})),c.createElement("div",{className:"Box"},c.createElement("span",null,"\u56fe\u7247\uff1a"),c.createElement(C,{className:"Dragger",onChange:this.handleUpload,beforeUpload:this.beforeUpload.bind(this)},c.createElement("p",{className:"ant-upload-drag-icon"},c.createElement(b.a,{type:"inbox"})),c.createElement("p",{className:"ant-upload-hint"},"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u81f3\u6b64\u5904"))),c.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},c.createElement(p.a,{onClick:function(){e.setState({visible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),c.createElement(p.a,{onClick:function(){e.setState({visible:!0}),e.submitPetType()},type:"primary"},"\u786e\u5b9a")))),c.createElement("div",null,c.createElement(g.a,{width:500,title:"\u7f16\u8f91\u5ba0\u7269\u7c7b\u578b",placement:"right",closable:!0,onClose:function(){e.setState({editVisible:!1})},visible:this.state.editVisible},c.createElement("div",null,c.createElement("span",null,"\u5206\u7c7b\uff1a"),c.createElement(v.a,{style:{width:"70%"},placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d",onChange:function(t){e.setState({defaultPetName:t.target.value})},defaultValue:this.state.defaultPetName,value:this.state.defaultPetName})),c.createElement("div",{className:"Box"},c.createElement("span",null,"\u56fe\u7247\uff1a"),c.createElement(C,{className:"Dragger",onChange:this.handleUpload,beforeUpload:this.beforeUpload.bind(this)},c.createElement("p",{className:"ant-upload-drag-icon"},c.createElement(b.a,{type:"inbox"})),c.createElement("p",{className:"ant-upload-hint"},"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u81f3\u6b64\u5904"))),l&&[6,7,8].includes(i)?c.createElement("div",null,c.createElement("span",null,"\u4f53\u578b\uff1a"),c.createElement(T,{onChange:function(t){e.setState({defalutSizeValue:t.target.value})},value:i},c.createElement(d.a,{value:6},"\u5927\u578b\u72ac"),c.createElement(d.a,{value:7},"\u4e2d\u578b\u72ac"),c.createElement(d.a,{value:8},"\u5c0f\u578b\u72ac"))):"",c.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},c.createElement(p.a,{onClick:function(){e.setState({editVisible:!1})},style:{marginRight:8}},"\u53d6\u6d88"),c.createElement(p.a,{onClick:function(){e.editSubmitPetType()},type:"primary"},"\u786e\u8ba4"))),c.createElement(y.a,{visible:this.state.showImage,onCancel:function(){return e.setState({showImage:!1})},footer:null,destroyOnClose:!0},(u=this.state.imageSrc,c.createElement("img",{src:u,alt:"",style:{width:"100%"}})))))}}]),t}(c.Component)}}]);
//# sourceMappingURL=11.3b04c0a4.chunk.js.map