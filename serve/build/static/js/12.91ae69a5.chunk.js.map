{"version":3,"sources":["util/petTypeOptions.ts","webpack:///./src/pages/divide/serviceDivide/index.less?44b8","pages/divide/serviceDivide/index.less","pages/divide/serviceDivide/index.tsx"],"names":["__webpack_require__","d","__webpack_exports__","getPetTypeOptions","data","level","filter","Item","Index","map","item","index","ChildrenPidResult","id","pid","PItem","PIndex","value","toString","label","name","children","content","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","RadioGroup","Radio","Group","Dragger","Upload","ServiceDivide","state","files","updateId","selectedRowKeys","selectedPetKeys","selectedPetTypeKeys","loading","filteredInfo","sortedInfo","visible","editVisible","imageUrl","defaultServiceName","defalutSizeValue","editSizeVisible","tableData","resTableData","resPetTypeTableData","showImage","imageSrc","onSelectChange","_this","setState","handleChange","pagination","filters","sorter","console","log","handleDelete","key","addServiceType","showDrawer","editServiceType","record","deleteServiceType","axios","method","url","ids","then","res","message","success","setTimeout","window","location","reload","error","submitServiceType","_this$state","PID","img","editSubmitServiceType","_this$state2","image","handleUpload","_ref","fileList","file","imgName","adminId","localStorage","getItem","timeStamp","Date","getTime","length","alert","fileName","concat","upToken","sendToQiniu","ImageString","concatImageString","That","this","kinds","status","creatTime","ct","moment","parseInt","format","modifiedTime","mt","operation","FileList","Object","E_pet_admin_web_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","imgSrc","_this2","_this$state3","columns","title","dataIndex","render","text","split","react__WEBPACK_IMPORTED_MODULE_6__","href","onClick","filteredValue","onFilter","Value","includes","bind","rowSelection","onChange","hasSelected","Options","style","marginBottom","textAlign","antd__WEBPACK_IMPORTED_MODULE_10__","type","marginRight","disabled","marginLeft","antd__WEBPACK_IMPORTED_MODULE_11__","dataSource","pageSize","locale","filterConfirm","filterReset","emptyText","antd__WEBPACK_IMPORTED_MODULE_12__","width","placement","closable","onClose","e","target","antd__WEBPACK_IMPORTED_MODULE_7__","margin","antd__WEBPACK_IMPORTED_MODULE_13__","val","placeholder","antd__WEBPACK_IMPORTED_MODULE_14__","className","beforeUpload","antd__WEBPACK_IMPORTED_MODULE_15__","position","left","bottom","borderTop","padding","background","defaultValue","antd__WEBPACK_IMPORTED_MODULE_16__","onCancel","footer","destroyOnClose","src","alt","React"],"mappings":"2FAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAO,IAAMA,EAAkB,SAACC,EAASC,GAErC,OAAW,IAARA,EACQ,KAmBcD,EAAKE,OAAO,SAACC,EAASC,GAAV,OAAyC,IAAfD,EAAKF,QAEnCI,IAAI,SAACC,EAAWC,GAEzC,IAEMC,EAFsBR,EAAKE,OAAO,SAACC,EAASC,GAAV,OAA0BE,EAAKG,KAAON,EAAKO,MAErCL,IAAI,SAACM,EAAUC,GACzD,MAAO,CACHC,MAAMF,EAAMF,GAAGK,WACfC,MAAMJ,EAAMK,QAIpB,MAAO,CACHH,MAAMP,EAAKG,GAAGK,WACdC,MAAMT,EAAKU,KACXC,SAAST,2BCrCzB,IAAAU,EAActB,EAAQ,KAEtB,kBAAAsB,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAC,GAEa7B,EAAQ,GAARA,CAAiEsB,EAAAG,GAE9EH,EAAAQ,SAAAP,EAAAQ,QAAAT,EAAAQ,8BCjBAP,EAAAQ,QAA2B/B,EAAQ,GAARA,EAAiE,IAE5FgC,KAAA,CAAcT,EAAAC,EAAS,6RCQjBS,EAAaC,IAAMC,MACnBC,EAAUC,IAAOD,QAMFE,6MAEVC,MAAQ,CACXC,MAAO,GACPC,SAAU,EACVC,gBAAiB,GACjBC,gBAAiB,GACjBC,oBAAqB,GACrBC,SAAS,EACTC,aAAc,KACdC,WAAY,GACZC,SAAS,EACTC,aAAa,EACbhC,MAAO,EACPiC,SAAU,GACVC,mBAAoB,GACpBC,iBAAkB,EAClBC,iBAAiB,EACjBC,UAAW,GACXC,aAAc,GACdC,oBAAqB,GACrBC,WAAW,EACXC,SAAU,MA8BPC,eAAiB,SAACjB,GACrBkB,EAAKC,SAAS,CAAEnB,uBAGboB,aAAe,SAACC,EAAiBC,EAAcC,GAClDC,QAAQC,IAAI,qBAAsBJ,EAAYC,EAASC,GACvDL,EAAKC,SAAS,CACVf,aAAckB,EACdjB,WAAYkB,OAIbG,aAAe,SAACC,GACnBH,QAAQC,IAAIE,MAGTC,eAAiB,WACpBV,EAAKW,gBAGFC,gBAAkB,SAACC,GACtBb,EAAKC,SAAS,CACVZ,aAAa,EACbE,mBAAoBsB,EAAOrD,KAC3BqB,SAAUgC,EAAOJ,SAIlBE,WAAa,WAChBX,EAAKC,SAAS,CACVb,SAAS,OAIV0B,kBAAoB,WAEvB,IAAMhC,EAAkBkB,EAAKrB,MAAMG,gBAEnCiC,YAAM,CACFC,OAAQ,OACRC,IAAK,kBACLzE,KAAM,CACF0E,IAAKpC,KAEVqC,KAAK,SAACC,GACDA,GACAC,IAAQC,QAAQ,4BAChBC,WAAW,WACPC,OAAOC,SAASC,UACjB,MAEHL,IAAQM,MAAM,iCAMnBC,kBAAoB,WAAM,IAAAC,EAEoC7B,EAAKrB,MAA9DY,EAFqBsC,EAErBtC,mBAAoBR,EAFC8C,EAED9C,gBAAiBO,EAFhBuC,EAEgBvC,SAAUjC,EAF1BwE,EAE0BxE,MAEjDyE,EAAM/C,EAAgB,GAAKiB,EAAKrB,MAAMI,gBAAgB,IAAM,EAElEgC,YAAM,CACFC,OAAQ,OACRC,IAAK,eACLzE,KAAM,CACFgB,KAAM+B,EACNrC,IAAK4E,EACLC,IAAKzC,EACL7C,MAAOY,KAEZ8D,KAAK,SAACC,GACDA,GACAC,IAAQC,QAAQ,4BAChBC,WAAW,WACPC,OAAOC,SAASC,UACjB,MAEHL,IAAQM,MAAM,iCAKnBK,sBAAwB,WAAM,IAAAC,EAEkBjC,EAAKrB,MAAhDY,EAFyB0C,EAEzB1C,mBAAoBD,EAFK2C,EAEL3C,SAAUT,EAFLoD,EAEKpD,SAEtCkC,YAAM,CACFC,OAAQ,OACRC,IAAK,gBACLzE,KAAM,CACFS,GAAI4B,EACJrB,KAAM+B,EACN2C,MAAO5C,KAEZ6B,KAAK,SAACC,GACDA,GACAC,IAAQC,QAAQ,4BAChBC,WAAW,WACPC,OAAOC,SAASC,UACjB,MAEHL,IAAQM,MAAM,iCAgBnBQ,aAAe,SAAAC,GAAsD,IAAnDC,EAAmDD,EAAnDC,SAAUC,EAAyCF,EAAzCE,KAEzBC,EAAUD,EAAK9E,KAGjBgF,EAAyBC,aAAaC,QAAQ,WAE5CC,GAAY,IAAIC,MAAOC,UAAUvF,WAEvC,GAAIkF,EACA,KAAOA,EAAQM,OAAS,IACpBN,GAAW,SAGfO,MAAM,kCAIV,IAAMC,EAAQ,GAAAC,OAAMT,GAANS,OAAgBN,EAAhB,QAEdN,EAASxF,IAAI,SAACC,EAASC,GAChBD,EAAKU,OAAS+E,IACbzF,EAAKU,KAAOwF,KAKpB1C,QAAQC,IAAI8B,EAASC,GAErB,IAAMY,EAAUT,aAAaC,QAAQ,eAEjCQ,GACAC,YAAYb,EAAMU,EAAUE,EAAQ,MAGxC,IAAME,EAAcC,YAAkBhB,GAGtCrC,EAAKC,SAAS,CACVrB,MAAOyD,EACP/C,SAAY8D,wFAzLhB,IAAME,EAAOC,KACbxC,YAAM,CACFC,OAAQ,MACRC,IAAK,kBACNE,KAAK,SAACC,GACL,GAAIA,GAAOA,EAAI0B,OAAS,EAAG,CACvB,IAAMpD,EAAY0B,EAAIvE,IAAI,SAACC,EAAWC,GAClC,MAAO,CACH0D,IAAK3D,EAAKG,GACVO,KAAMV,EAAKU,KACX0E,MAAOpF,EAAKiF,IAAMjF,EAAKiF,IAAM,GAC7ByB,MAAK,GAAAP,OAAKnG,EAAKL,MAAV,sBACLgH,OAAQ3G,EAAK2G,OAAS3G,EAAK2G,OAAS,OACpCC,UAAW5G,EAAK6G,GAAKC,IAAOC,SAAS/G,EAAK6G,GAAG,KAAKG,OAAO,sBAAwB,OACjFC,aAAcjH,EAAKkH,GAAKJ,IAAOC,SAAS/G,EAAKkH,GAAG,KAAKF,OAAO,sBAAwB,OACpFG,UAAW,MAGnBX,EAAKrD,SAAS,CACVP,UAAaA,EACbC,aAAcyB,4CAkHVkB,GAEhB,IAAM4B,EAAWX,KAAK5E,MAAMC,MAM5B,OAJA2E,KAAKtD,SAAS,CACVrB,MAAK,GAAAqE,OAAAkB,OAAAC,EAAA,EAAAD,CAAMD,GAAN,CAAgB5B,OAGlB,mCA+CK,IA3NF+B,EA2NEC,EAAAf,KAAAgB,EAEmFhB,KAAK5E,MAA5FG,EAFIyF,EAEJzF,gBAAiBW,EAFb8E,EAEa9E,gBAAiBD,EAF9B+E,EAE8B/E,iBAAkBE,EAFhD6E,EAEgD7E,UAAWC,EAF3D4E,EAE2D5E,aAAcf,EAFzE2F,EAEyE3F,MAE/EM,EAAsBqE,KAAK5E,MAA3BO,aAIAsF,EAAU,CAAC,CACbC,MAAO,2BACPC,UAAW,OACXjE,IAAK,QACN,CACCgE,MAAO,eACPC,UAAW,QACXjE,IAAK,QACLkE,OAAQ,SAACC,EAAW/D,GAEhB,MAAqB,KAAjBA,EAAOqB,MAEcrB,EAAOqB,MAAM2C,MAAM,KAEZhI,IAAI,SAACC,EAAcC,GAAf,OAC5B+H,EAAA,mBAAGC,KAAK,sBAAsBtE,IAAK1D,EAAOiI,QAAS,WAC/CV,EAAKrE,SAAS,CACVJ,WAAW,EACXC,SAAUhD,MAHlB,8BAYGgI,EAAA,4CAKhB,CACCL,MAAO,2BACPC,UAAW,QACXjE,IAAK,QACLL,QAAS,CACL,CAAEwE,KAAM,sBAAQvH,MAAO,KACvB,CAAEuH,KAAM,sBAAQvH,MAAO,MAE3B4H,eA1CJ/F,EAAeA,GAAgB,IA0CCsE,OAAS,KACrC0B,SAAU,SAACC,EAAetE,GAAhB,OAAgCA,EAAO2C,MAAMlG,WAAW8H,SAASD,KAC5E,CACCV,MAAO,eACPC,UAAW,SACXjE,IAAK,UACN,CACCgE,MAAO,2BACPC,UAAW,YACXjE,IAAK,aACN,CACCgE,MAAO,uCACPC,UAAW,eACXjE,IAAK,gBACN,CACCgE,MAAO,eACPC,UAAW,YACXjE,IAAK,YACLkE,OAAQ,SAACC,EAAW/D,GAEhB,OADAP,QAAQC,IAAIM,GAERiE,EAAA,mBAAGC,KAAK,eAAeC,QAASV,EAAK1D,gBAAgByE,KAAKf,EAAMzD,IAAhE,mBAKNyE,EAAe,CACjBxG,kBACAyG,SAAUhC,KAAKxD,gBAGbyF,EAAc1G,EAAgBgE,OAAS,EAEvC2C,EAAUlJ,YAAkBoD,EAAc4D,KAAK5E,MAAMtB,OAE3D,OACIyH,EAAA,yBACIA,EAAA,qBAAKY,MAAO,CAAEC,aAAc,GAAIC,UAAW,SACvCd,EAAA,cAACe,EAAA,EAAD,CAAQC,KAAK,UAAUd,QAASzB,KAAK7C,eAAe2E,KAAK9B,MAAOmC,MAAO,CAAEK,YAAa,KAAtF,gBAGAjB,EAAA,cAACe,EAAA,EAAD,CAAQC,KAAK,SAASE,UAAWR,EAAaR,QAAS,WACnDV,EAAKxD,sBADT,gBAMAgE,EAAA,sBAAMY,MAAO,CAAEO,WAAY,IACtBT,EAAW,qBAAAvC,OAASnE,EAAgBgE,OAAzB,UAAqC,KAGzDgC,EAAA,yBACIA,EAAA,cAACoB,EAAA,EAAD,CAAOZ,aAAcA,EAAcd,QAASA,EAAS2B,WAAYzG,EAC7DS,WAAY,CAAEiG,SAAU,IACxBb,SAAUhC,KAAKrD,aACfmG,OAAQ,CAAEC,cAAe,eAAMC,YAAa,eAAMC,UAAW,+BAGrE1B,EAAA,yBACIA,EAAA,cAAC2B,EAAA,EAAD,CACIC,MAAO,IACPjC,MAAM,uCACNkC,UAAU,QACVC,UAAU,EACVC,QAAS,WAAQvC,EAAKrE,SAAS,CAAEb,SAAS,EAAOR,MAAO,MACxDQ,QAASmE,KAAK5E,MAAMS,SAEpB0F,EAAA,cAACzG,EAAD,CAAYkH,SAAU,SAACuB,GAAaxC,EAAKrE,SAAS,CAAE5C,MAAOyJ,EAAEC,OAAO1J,SAAYA,MAAOkG,KAAK5E,MAAMtB,OAC9FyH,EAAA,cAACkC,EAAA,EAAD,CAAO3J,MAAO,GAAd,sBACAyH,EAAA,cAACkC,EAAA,EAAD,CAAO3J,MAAO,GAAd,6BAEJyH,EAAA,qBAAKY,MAAO,CAAEuB,OAAQ,WACjBxB,EAAUX,EAAA,gDAAmB,GAC7BW,EACGX,EAAA,cAACoC,EAAA,EAAD,CAAUxB,MAAO,CAAEgB,MAAO,OAAS7I,QAAS4H,EAASF,SAAU,SAAC4B,GAAD,OAAc7C,EAAKrE,SAAS,CAAElB,gBAAiBoI,KAAQC,YAAY,yCAChI,IAEVtC,EAAA,yBACIA,EAAA,gDACAA,EAAA,cAACuC,EAAA,EAAD,CAAO3B,MAAO,CAAEgB,MAAO,OAASU,YAAY,uCAAS7B,SAAU,SAACuB,GAAaxC,EAAKrE,SAAS,CAAEV,mBAAoBuH,EAAEC,OAAO1J,YAE9HyH,EAAA,qBAAKwC,UAAU,OACXxC,EAAA,gDACAA,EAAA,cAACtG,EAAD,CAAS8I,UAAU,UACfjF,SAAUzD,EACV2I,aAAchE,KAAKgE,aAAalC,KAAK9B,MACrCgC,SAAUhC,KAAKpB,cAEf2C,EAAA,mBAAGwC,UAAU,wBACTxC,EAAA,cAAC0C,EAAA,EAAD,CAAM1B,KAAK,WAEfhB,EAAA,mBAAGwC,UAAU,mBAAb,kEAGRxC,EAAA,qBACIY,MAAO,CACH+B,SAAU,WACVC,KAAM,EACNC,OAAQ,EACRjB,MAAO,OACPkB,UAAW,oBACXC,QAAS,YACTC,WAAY,OACZlC,UAAW,UAGfd,EAAA,cAACe,EAAA,EAAD,CAAQb,QAAS,WAAQV,EAAKrE,SAAS,CAAEb,SAAS,KAAYsG,MAAO,CAAEK,YAAa,IAApF,gBAGAjB,EAAA,cAACe,EAAA,EAAD,CAAQb,QAAS,WACbV,EAAKrE,SAAS,CAAEb,SAAS,IACzBkF,EAAK1C,qBAELkE,KAAK,WAJT,mBAUZhB,EAAA,yBACIA,EAAA,cAAC2B,EAAA,EAAD,CACIC,MAAO,IACPjC,MAAM,uCACNkC,UAAU,QACVC,UAAU,EACVC,QAAS,WAAQvC,EAAKrE,SAAS,CAAEZ,aAAa,EAAOT,MAAO,MAC5DQ,QAASmE,KAAK5E,MAAMU,aAEpByF,EAAA,yBACIA,EAAA,gDACAA,EAAA,cAACuC,EAAA,EAAD,CAAO3B,MAAO,CAAEgB,MAAO,OAASU,YAAY,uCAAS7B,SAAU,SAACuB,GAAaxC,EAAKrE,SAAS,CAAEV,mBAAoBuH,EAAEC,OAAO1J,SACtH0K,aAAcxE,KAAK5E,MAAMY,mBACzBlC,MAAOkG,KAAK5E,MAAMY,sBAG1BuF,EAAA,qBAAKwC,UAAU,OACXxC,EAAA,gDACAA,EAAA,cAACtG,EAAD,CACI8I,UAAU,UACVjF,SAAUzD,EACV2I,aAAchE,KAAKgE,aAAalC,KAAK9B,MACrCgC,SAAUhC,KAAKpB,cAEf2C,EAAA,mBAAGwC,UAAU,wBACTxC,EAAA,cAAC0C,EAAA,EAAD,CAAM1B,KAAK,WAEfhB,EAAA,mBAAGwC,UAAU,mBAAb,kEAIJ7H,EACIqF,EAAA,yBACIA,EAAA,gDACAA,EAAA,cAACzG,EAAD,CAAYkH,SAAU,SAACuB,GAAaxC,EAAKrE,SAAS,CAAET,iBAAkBsH,EAAEC,OAAO1J,SAAYA,MAAOmC,GAC9FsF,EAAA,cAACkC,EAAA,EAAD,CAAO3J,MAAO,GAAd,sBACAyH,EAAA,cAACkC,EAAA,EAAD,CAAO3J,MAAO,GAAd,sBACAyH,EAAA,cAACkC,EAAA,EAAD,CAAO3J,MAAO,GAAd,wBAEC,GAEjByH,EAAA,qBACIY,MAAO,CACH+B,SAAU,WACVC,KAAM,EACNC,OAAQ,EACRjB,MAAO,OACPkB,UAAW,oBACXC,QAAS,YACTC,WAAY,OACZlC,UAAW,UAGfd,EAAA,cAACe,EAAA,EAAD,CAAQb,QAAS,WAAQV,EAAKrE,SAAS,CAAEZ,aAAa,KAAYqG,MAAO,CAAEK,YAAa,IAAxF,gBAGAjB,EAAA,cAACe,EAAA,EAAD,CAAQb,QAAS,WAEbV,EAAKtC,yBAEL8D,KAAK,WAJT,kBASRhB,EAAA,cAACkD,EAAA,EAAD,CACI5I,QAASmE,KAAK5E,MAAMkB,UACpBoI,SAAU,kBAAM3D,EAAKrE,SAAS,CAAEJ,WAAW,KAC3CqI,OAAQ,KACRC,gBAAgB,IAvctB9D,EAycgBd,KAAK5E,MAAMmB,SAxczCgF,EAAA,qBAAKsD,IAAK/D,EAAQgE,IAAI,GAAG3C,MAAO,CAAEgB,MAAO,qBAGF4B","file":"static/js/12.91ae69a5.chunk.js","sourcesContent":["export const getPetTypeOptions=(data:any,level:number)=>{\r\n\r\n    if(level===1){\r\n        return null\r\n    }\r\n\r\n    // if(level===2){\r\n\r\n    //     const filteredData = data.filter((item: any, index: number) => {\r\n    //         return item.id === 1\r\n    //     })\r\n    //     const Options=filteredData.map((item:any,index:number)=>{\r\n    //         return {\r\n    //             value:item.id,\r\n    //             label:item.name\r\n    //         }\r\n    //     })\r\n    //     return Options\r\n    // }\r\n\r\n    if(level === 3 || 2){\r\n\r\n        const filteredData = data.filter((Item:any,Index:number)=>(Item.level === 1))\r\n\r\n        const Options = filteredData.map((item: any, index: number) => {\r\n    \r\n            const ChildrenPidFiltered = data.filter((Item:any,Index:number)=>(item.id === Item.pid))\r\n    \r\n            const ChildrenPidResult = ChildrenPidFiltered.map((PItem:any,PIndex:number)=>{\r\n                return {\r\n                    value:PItem.id.toString(),\r\n                    label:PItem.name\r\n                }\r\n            })\r\n    \r\n            return {\r\n                value:item.id.toString(),\r\n                label:item.name,\r\n                children:ChildrenPidResult\r\n            }\r\n        })\r\n        \r\n        return Options\r\n    }\r\n\r\n\r\n}","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n\n","import * as React from 'react';\r\nimport {\r\n    Table, Button, Drawer, Radio, Cascader, Input, Icon, Upload, message ,Modal\r\n} from 'antd';\r\nimport { getPetTypeOptions } from '../../../util/petTypeOptions';\r\nimport './index.less';\r\nimport axios from '../../../util/Axios';\r\nimport { sendToQiniu, concatImageString } from '../../../util/sendToQiniu';\r\nimport moment from 'moment'\r\n\r\nconst RadioGroup = Radio.Group;\r\nconst Dragger = Upload.Dragger;\r\n\r\nconst PopImage = (imgSrc: string) => (\r\n    <img src={imgSrc} alt=\"\" style={{ width: \"100%\" }} />\r\n)\r\n\r\nexport default class ServiceDivide extends React.Component<any, any> {\r\n\r\n    public state = {\r\n        files: [],\r\n        updateId: 1, // edit id 要更新的id\r\n        selectedRowKeys: [], // Check here to configure the default column\r\n        selectedPetKeys: [],\r\n        selectedPetTypeKeys: [],\r\n        loading: false,\r\n        filteredInfo: null,\r\n        sortedInfo: \"\",\r\n        visible: false,\r\n        editVisible: false,\r\n        value: 2,  // 默认选择的一级分类\r\n        imageUrl: \"\",\r\n        defaultServiceName: \"\", // 编辑服务名字\r\n        defalutSizeValue: 6, // 编辑服务体型\r\n        editSizeVisible: false,  // 编辑服务体型选项是否显示\r\n        tableData: [],\r\n        resTableData: [],\r\n        resPetTypeTableData: [],\r\n        showImage: false,\r\n        imageSrc: \"\",\r\n    };\r\n\r\n    public componentDidMount() {\r\n        const That = this\r\n        axios({\r\n            method: \"get\",\r\n            url: \"/service/list\"\r\n        }).then((res: any) => {\r\n            if (res && res.length > 0) {\r\n                const tableData = res.map((item: any, index: number) => {\r\n                    return {\r\n                        key: item.id,  // key 应带对应data id \r\n                        name: item.name,\r\n                        image: item.img ? item.img : \"\",\r\n                        kinds: `${item.level}级分类`,\r\n                        status: item.status ? item.status : \"----\",\r\n                        creatTime: item.ct ? moment(parseInt(item.ct,10)).format('YYYY-MM-DD H:mm:ss') : \"----\",\r\n                        modifiedTime: item.mt ? moment(parseInt(item.mt,10)).format('YYYY-MM-DD H:mm:ss') : \"----\",\r\n                        operation: \"\"\r\n                    }\r\n                })\r\n                That.setState({\r\n                    \"tableData\": tableData,\r\n                    resTableData: res\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    public onSelectChange = (selectedRowKeys: any) => {\r\n        this.setState({ selectedRowKeys });\r\n    }\r\n\r\n    public handleChange = (pagination: any, filters: any, sorter: any) => {\r\n        console.log('Various parameters', pagination, filters, sorter);\r\n        this.setState({\r\n            filteredInfo: filters,\r\n            sortedInfo: sorter,\r\n        });\r\n    }\r\n\r\n    public handleDelete = (key: any) => {\r\n        console.log(key)\r\n    }\r\n\r\n    public addServiceType = () => {\r\n        this.showDrawer()\r\n    }\r\n\r\n    public editServiceType = (record: any) => {\r\n        this.setState({\r\n            editVisible: true,\r\n            defaultServiceName: record.name,\r\n            updateId: record.key\r\n        })\r\n    }\r\n\r\n    public showDrawer = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    public deleteServiceType = () => {\r\n\r\n        const selectedRowKeys = this.state.selectedRowKeys\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/service/delete\",\r\n            data: {\r\n                ids: selectedRowKeys\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"删除成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"删除失败\")\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    public submitServiceType = () => {\r\n\r\n        const { defaultServiceName, selectedPetKeys, imageUrl, value } = this.state\r\n\r\n        const PID = selectedPetKeys[1] ? this.state.selectedPetKeys[1] : -1\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/service/add\",\r\n            data: {\r\n                name: defaultServiceName,\r\n                pid: PID,\r\n                img: imageUrl,\r\n                level: value,\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"添加成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"添加失败\")\r\n            }\r\n        })\r\n\r\n    }\r\n    public editSubmitServiceType = () => {\r\n\r\n        const { defaultServiceName, imageUrl, updateId } = this.state\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: \"/service/edit\",\r\n            data: {\r\n                id: updateId,\r\n                name: defaultServiceName,\r\n                image: imageUrl,\r\n            }\r\n        }).then((res: any) => {\r\n            if (res) {\r\n                message.success(\"修改成功\")\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 500);\r\n            } else {\r\n                message.error(\"修改失败\")\r\n            }\r\n        })\r\n    }\r\n\r\n    public beforeUpload(file: any) {\r\n\r\n        const FileList = this.state.files\r\n\r\n        this.setState({\r\n            files: [...FileList, file]\r\n        })\r\n\r\n        return false;\r\n    }\r\n\r\n    public handleUpload = ({ fileList, file }: { fileList: any, file: any }) => {\r\n\r\n        const imgName = file.name\r\n\r\n\r\n        let adminId: string | null = localStorage.getItem(\"adminId\")\r\n\r\n        const timeStamp = new Date().getTime().toString()\r\n    \r\n        if (adminId) {\r\n            while (adminId.length < 36) {\r\n                adminId += \"x\"\r\n            }\r\n        } else {\r\n            alert(\"请重新登陆\")\r\n        }\r\n    \r\n    \r\n        const fileName = `${adminId}${timeStamp}ao12`\r\n\r\n        fileList.map((item:any,index:number)=>{  \r\n            if(item.name === imgName){\r\n                item.name = fileName\r\n            }\r\n            return\r\n        })\r\n\r\n        console.log(fileList,file)\r\n\r\n        const upToken = localStorage.getItem('uploadToken')  // 获得token\r\n\r\n        if (upToken) {\r\n            sendToQiniu(file, fileName, upToken,\"ao\") // 发送到七牛\r\n        }\r\n\r\n        const ImageString = concatImageString(fileList)\r\n\r\n\r\n        this.setState({\r\n            files: fileList,\r\n            \"imageUrl\": ImageString\r\n        })\r\n\r\n    }\r\n    public render() {\r\n\r\n        const { selectedRowKeys, editSizeVisible, defalutSizeValue, tableData, resTableData, files } = this.state;\r\n\r\n        let { filteredInfo }: any = this.state;\r\n\r\n        filteredInfo = filteredInfo || {};\r\n\r\n        const columns = [{\r\n            title: '服务分类',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        }, {\r\n            title: '图片',\r\n            dataIndex: 'image',\r\n            key: 'image',\r\n            render: (text: any, record: any) => {\r\n\r\n                if (record.image !== \"\") {\r\n\r\n                    const imageUrlList = record.image.split(',')\r\n\r\n                    const images = imageUrlList.map((item: string, index: number) => (\r\n                        <a href=\"javascript:void(0);\" key={index} onClick={() => {\r\n                            this.setState({\r\n                                showImage: true,\r\n                                imageSrc: item\r\n                            })\r\n                        }}>点击查看</a>\r\n                    ))\r\n\r\n                    return images\r\n\r\n                } else {\r\n\r\n                    return <span>暂无</span>\r\n\r\n                }\r\n\r\n            }\r\n        }, {\r\n            title: '服务种类',\r\n            dataIndex: 'kinds',\r\n            key: 'kinds',\r\n            filters: [\r\n                { text: '1级分类', value: '1' },\r\n                { text: '2级分类', value: '2' },\r\n            ],\r\n            filteredValue: filteredInfo.kinds || null,\r\n            onFilter: (Value: string, record: any) => record.kinds.toString().includes(Value),\r\n        }, {\r\n            title: '状态',\r\n            dataIndex: 'status',\r\n            key: 'status',\r\n        }, {\r\n            title: '创建时间',\r\n            dataIndex: 'creatTime',\r\n            key: 'creatTime',\r\n        }, {\r\n            title: '最后修改时间',\r\n            dataIndex: 'modifiedTime',\r\n            key: 'modifiedTime',\r\n        }, {\r\n            title: '操作',\r\n            dataIndex: 'operation',\r\n            key: 'operation',\r\n            render: (text: any, record: any) => {\r\n                console.log(record)\r\n                return (\r\n                    <a href=\"javascript:;\" onClick={this.editServiceType.bind(this, record)}>编辑</a>\r\n                )\r\n            }\r\n        }];\r\n\r\n        const rowSelection = {\r\n            selectedRowKeys,\r\n            onChange: this.onSelectChange\r\n        };\r\n\r\n        const hasSelected = selectedRowKeys.length > 0;\r\n\r\n        const Options = getPetTypeOptions(resTableData, this.state.value)\r\n\r\n        return (\r\n            <div>\r\n                <div style={{ marginBottom: 16, textAlign: \"left\" }}>\r\n                    <Button type=\"primary\" onClick={this.addServiceType.bind(this)} style={{ marginRight: 20 }}>\r\n                        添加\r\n                    </Button>\r\n                    <Button type=\"danger\" disabled={!hasSelected} onClick={() => {\r\n                        this.deleteServiceType()\r\n                    }}>\r\n                        删除\r\n                    </Button>\r\n\r\n                    <span style={{ marginLeft: 8 }}>\r\n                        {hasSelected ? `选择了${selectedRowKeys.length}项` : ''}\r\n                    </span>\r\n                </div>\r\n                <div>\r\n                    <Table rowSelection={rowSelection} columns={columns} dataSource={tableData}\r\n                        pagination={{ pageSize: 10 }}\r\n                        onChange={this.handleChange}\r\n                        locale={{ filterConfirm: \"确定\", filterReset: \"重置\", emptyText: \"暂无数据\" }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <Drawer\r\n                        width={500}\r\n                        title=\"添加服务类型\"\r\n                        placement=\"right\"\r\n                        closable={true}\r\n                        onClose={() => { this.setState({ visible: false, files: [] }) }}\r\n                        visible={this.state.visible}\r\n                    >\r\n                        <RadioGroup onChange={(e: any) => { this.setState({ value: e.target.value }) }} value={this.state.value}>\r\n                            <Radio value={1}>根目录</Radio>\r\n                            <Radio value={2}>宠物种类</Radio>\r\n                        </RadioGroup>\r\n                        <div style={{ margin: \"20px 0\" }}>\r\n                            {Options ? <span>层级：</span> : \"\"}\r\n                            {Options ?\r\n                                <Cascader style={{ width: \"70%\" }} options={Options} onChange={(val: any) => this.setState({ selectedPetKeys: val })} placeholder=\"选择上一层级\" />\r\n                                : \"\"}\r\n                        </div>\r\n                        <div>\r\n                            <span>分类：</span>\r\n                            <Input style={{ width: \"70%\" }} placeholder=\"请输入分类名\" onChange={(e: any) => { this.setState({ defaultServiceName: e.target.value }) }} />\r\n                        </div>\r\n                        <div className=\"Box\">\r\n                            <span>图片：</span>\r\n                            <Dragger className=\"Dragger\"\r\n                                fileList={files}\r\n                                beforeUpload={this.beforeUpload.bind(this)}\r\n                                onChange={this.handleUpload}\r\n                            >\r\n                                <p className=\"ant-upload-drag-icon\">\r\n                                    <Icon type=\"inbox\" />\r\n                                </p>\r\n                                <p className=\"ant-upload-hint\">点击或拖拽图片至此处</p>\r\n                            </Dragger>\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                position: 'absolute',\r\n                                left: 0,\r\n                                bottom: 0,\r\n                                width: '100%',\r\n                                borderTop: '1px solid #e9e9e9',\r\n                                padding: '10px 16px',\r\n                                background: '#fff',\r\n                                textAlign: 'right',\r\n                            }}\r\n                        >\r\n                            <Button onClick={() => { this.setState({ visible: false }) }} style={{ marginRight: 8 }}>\r\n                                取消\r\n                            </Button>\r\n                            <Button onClick={() => {\r\n                                this.setState({ visible: true })\r\n                                this.submitServiceType()\r\n                            }}\r\n                                type=\"primary\">\r\n                                确定\r\n                            </Button>\r\n                        </div>\r\n                    </Drawer>\r\n                </div>\r\n                <div>\r\n                    <Drawer\r\n                        width={500}\r\n                        title=\"编辑服务类型\"\r\n                        placement=\"right\"\r\n                        closable={true}\r\n                        onClose={() => { this.setState({ editVisible: false, files: [] }) }}\r\n                        visible={this.state.editVisible}\r\n                    >\r\n                        <div>\r\n                            <span>分类：</span>\r\n                            <Input style={{ width: \"70%\" }} placeholder=\"请输入分类名\" onChange={(e: any) => { this.setState({ defaultServiceName: e.target.value }) }}\r\n                                defaultValue={this.state.defaultServiceName}\r\n                                value={this.state.defaultServiceName}\r\n                            />\r\n                        </div>\r\n                        <div className=\"Box\">\r\n                            <span>图片：</span>\r\n                            <Dragger\r\n                                className=\"Dragger\"\r\n                                fileList={files}\r\n                                beforeUpload={this.beforeUpload.bind(this)}\r\n                                onChange={this.handleUpload}\r\n                            >\r\n                                <p className=\"ant-upload-drag-icon\">\r\n                                    <Icon type=\"inbox\" />\r\n                                </p>\r\n                                <p className=\"ant-upload-hint\">点击或拖拽图片至此处</p>\r\n                            </Dragger>\r\n                        </div>\r\n                        {\r\n                            editSizeVisible ?\r\n                                <div>\r\n                                    <span>体型：</span>\r\n                                    <RadioGroup onChange={(e: any) => { this.setState({ defalutSizeValue: e.target.value }) }} value={defalutSizeValue}>\r\n                                        <Radio value={6}>大型犬</Radio>\r\n                                        <Radio value={7}>中型犬</Radio>\r\n                                        <Radio value={8}>小型犬</Radio>\r\n                                    </RadioGroup>\r\n                                </div> : \"\"\r\n                        }\r\n                        <div\r\n                            style={{\r\n                                position: 'absolute',\r\n                                left: 0,\r\n                                bottom: 0,\r\n                                width: '100%',\r\n                                borderTop: '1px solid #e9e9e9',\r\n                                padding: '10px 16px',\r\n                                background: '#fff',\r\n                                textAlign: 'right',\r\n                            }}\r\n                        >\r\n                            <Button onClick={() => { this.setState({ editVisible: false }) }} style={{ marginRight: 8 }}>\r\n                                取消\r\n                            </Button>\r\n                            <Button onClick={() => {\r\n                                // petTypesUpdateMutation()\r\n                                this.editSubmitServiceType()\r\n                            }}\r\n                                type=\"primary\">\r\n                                确认\r\n                            </Button>\r\n                        </div>\r\n                    </Drawer>\r\n                    <Modal\r\n                        visible={this.state.showImage}\r\n                        onCancel={() => this.setState({ showImage: false })}\r\n                        footer={null}\r\n                        destroyOnClose={true}\r\n                    >\r\n                        {PopImage(this.state.imageSrc)}\r\n                    </Modal>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}